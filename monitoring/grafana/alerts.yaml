apiVersion: 1
groups:
    - orgId: 1
      name: 'openqaworker10: Disk I/O time alert'
      folder: tina-test
      interval: 1m
      rules:
        - uid: AnA25iB4z
          title: 'openqaworker10: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker10' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker10
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: zw6oDmkVk
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "476"
            __dashboardUid__: zw6oDmkVk
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: AnA25iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker10: partitions usage (%) alert'
      folder: tina-test
      interval: 1m
      rules:
        - uid: 27A2ciB4k
          title: 'openqaworker10: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker10' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: zw6oDmkVk
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "475"
            __dashboardUid__: zw6oDmkVk
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 27A2ciB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: GM0hcmBVz
          title: 'openqaworker12: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1500
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker12' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker12
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker12
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "333"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: GM0hcmBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: RGA2cif4k
          title: 'openqaworker12: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker12' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker12
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "329"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: RGA2cif4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: nG0h5ifVk
          title: 'openqaworker12: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker12') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker12
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "334"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: nG0h5ifVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: zGAh5mf4k
          title: 'openqaworker12: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker12
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "330"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zGAh5mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 4MAh5if4k
          title: 'openqaworker12: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker12
          dashboardUid: WDopenqaworker12
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "335"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker12.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker12`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4MAh5if4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker12: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: iGA2cif4k
          title: 'openqaworker12: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker12' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker12
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "332"
            __dashboardUid__: WDopenqaworker12
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: iGA2cif4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 2R0h5mf4k
          title: 'openqaworker2: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker2' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker2
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "175"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2R0h5mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Bg0h5ifVz
          title: 'openqaworker2: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker2') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker2
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "397"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Bg0h5ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: vg025mB4z
          title: 'openqaworker2: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker2' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker2
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "171"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: vg025mB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 1R0h5iBVz
          title: 'openqaworker2: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker2') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker2
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "176"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1R0h5iBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: KgA25iB4z
          title: 'openqaworker2: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker2
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "173"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: KgA25iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Eg02cmBVk
          title: 'openqaworker2: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker2
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "417"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Eg02cmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: -RA25mfVz
          title: 'openqaworker2: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker2
          dashboardUid: WDopenqaworker2
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "217"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker2.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker2`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: -RA25mfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker2: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: tRAh5mf4k
          title: 'openqaworker2: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker2' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker2
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "174"
            __dashboardUid__: WDopenqaworker2
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: tRAh5mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: eg025if4z
          title: 'openqaworker3: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker3' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker3
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "181"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: eg025if4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: GzAhcif4z
          title: 'openqaworker3: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker3') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker3
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "396"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: GzAhcif4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 8RA25mf4k
          title: 'openqaworker3: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker3' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker3
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "177"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8RA25mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: kz025mB4z
          title: 'openqaworker3: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker3') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker3
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "182"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: kz025mB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: lgA2cmBVk
          title: 'openqaworker3: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker3
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "179"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: lgA2cmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 7zA2cifVk
          title: 'openqaworker3: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker3
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "412"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 7zA2cifVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: iz0h5mfVk
          title: 'openqaworker3: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker3
          dashboardUid: WDopenqaworker3
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "210"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker3.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker3`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: iz0h5mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker3: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: rg0h5mBVk
          title: 'openqaworker3: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker3' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker3
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "180"
            __dashboardUid__: WDopenqaworker3
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: rg0h5mBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 4rTh5mBVk
          title: 'openqaworker5: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker5' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker5
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "85"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4rTh5mBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: trT25mf4z
          title: 'openqaworker5: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker5') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker5
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "388"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: trT25mf4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: zrTh5mB4k
          title: 'openqaworker5: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker5' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker5
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "81"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zrTh5mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: HrT25iBVk
          title: 'openqaworker5: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker5') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker5
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "86"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: HrT25iBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: W9o25mB4k
          title: 'openqaworker5: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker5
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "83"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: W9o25mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 2ro25ifVz
          title: 'openqaworker5: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker5
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "414"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2ro25ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: KrT2cifVz
          title: 'openqaworker5: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker5
          dashboardUid: WDopenqaworker5
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "215"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker5.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker5`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: KrT2cifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker5: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 7rohcmf4k
          title: 'openqaworker5: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker5' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker5
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "84"
            __dashboardUid__: WDopenqaworker5
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 7rohcmf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: rCThcmf4z
          title: 'openqaworker6: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker6' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker6
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "115"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: rCThcmf4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: g3Th5mf4k
          title: 'openqaworker6: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker6') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker6
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "398"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: g3Th5mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 8Co25mfVz
          title: 'openqaworker6: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker6' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker6
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "111"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8Co25mfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: jCo25mfVz
          title: 'openqaworker6: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker6') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker6
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "116"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jCo25mfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: wCohcifVz
          title: 'openqaworker6: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker6
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "113"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: wCohcifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: z3o2cmf4z
          title: 'openqaworker6: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker6
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "420"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: z3o2cmf4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 6jo2cmBVz
          title: 'openqaworker6: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker6
          dashboardUid: WDopenqaworker6
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "211"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker6.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker6`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6jo2cmBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker6: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: ljoh5ifVz
          title: 'openqaworker6: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker6' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker6
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "114"
            __dashboardUid__: WDopenqaworker6
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ljoh5ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: a9ohcmB4k
          title: 'openqaworker8: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker8' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker8
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "97"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: a9ohcmB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Urohcmf4k
          title: 'openqaworker8: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker8') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker8
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "390"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Urohcmf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: TrT25iBVk
          title: 'openqaworker8: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker8' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker8
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "93"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: TrT25iBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Y9o25mfVk
          title: 'openqaworker8: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker8') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker8
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "98"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Y9o25mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: 1roh5iB4z
          title: 'openqaworker8: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker8
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "95"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1roh5iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Q9T2cmB4k
          title: 'openqaworker8: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker8
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "418"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Q9T2cmB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: PrThciBVz
          title: 'openqaworker8: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker8
          dashboardUid: WDopenqaworker8
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "216"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker8.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker8`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: PrThciBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker8: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: xro25mB4k
          title: 'openqaworker8: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker8' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker8
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "96"
            __dashboardUid__: WDopenqaworker8
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: xro25mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: Disk I/O time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: Sqo25mB4k
          title: 'openqaworker9: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker9' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker9
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "139"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Sqo25mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: Download rate alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: FqTh5if4z
          title: 'openqaworker9: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker9') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker9
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "400"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: FqTh5if4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: Memory usage alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: ZqTh5if4z
          title: 'openqaworker9: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker9' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker9
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "135"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ZqTh5if4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: NTP offset alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: N3ThcmB4z
          title: 'openqaworker9: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker9') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker9
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "140"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: N3ThcmB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: OpenQA Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: G3o25if4z
          title: 'openqaworker9: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker9
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "137"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: G3o25if4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: QA network infrastructure Ping time alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: tqo2ciBVk
          title: 'openqaworker9: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker9
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "406"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: tqo2ciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: Too many Minion job failures alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: OqT25ifVz
          title: 'openqaworker9: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker9
          dashboardUid: WDopenqaworker9
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "212"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker9.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker9`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: OqT25ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker9: partitions usage (%) alert'
      folder: pre-migration workers (https://progress.opensuse.org/issues/119443)
      interval: 1m
      rules:
        - uid: n3ohcifVk
          title: 'openqaworker9: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker9' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker9
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "138"
            __dashboardUid__: WDopenqaworker9
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: n3ohcifVk
          isPaused: false
    - orgId: 1
      name: Apache Response Time alert
      folder: Salt
      interval: 1m
      rules:
        - uid: zZAh5mf4k
          title: Apache Response Time alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 500000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - min_apache_response
                      reducer:
                        type: median
                refId: A
                type: classic_conditions
            - refId: min_apache_response
              relativeTimeRange:
                from: 1800
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Min
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 12s
                measurement: apache_log
                orderByTime: ASC
                policy: default
                query: SELECT min("response_time_us") FROM "apache_log" WHERE ("host" = 'openqa' AND "request" !~ /\/api\/v1\/ws/) AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: false
                refId: min_apache_response
                resultFormat: time_series
                select:
                    - - params:
                            - response_time_us
                        type: field
                      - params: []
                        type: min
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: request
                      operator: '!~'
                      value: /\/api\/v1\/ws/
          dashboardUid: WebuiDb
          panelId: 84
          noDataState: NoData
          execErrState: Error
          for: 30m
          annotations:
            __alertId__: "307"
            __dashboardUid__: WebuiDb
            __panelId__: "84"
            message: |-
                The apache response time exceeded the alert threshold.

                * Check the load of the web UI host
                * Consider restarting the openQA web UI service and/or apache

                Also see https://progress.opensuse.org/issues/73633
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zZAh5mf4k
          isPaused: false
    - orgId: 1
      name: Apache Workers alert
      folder: Salt
      interval: 1m
      rules:
        - uid: MW025mB4z
          title: Apache Workers alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 10
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Idle
                dsType: influxdb
                groupBy:
                    - params:
                        - $interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: apache
                orderByTime: ASC
                policy: default
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - IdleWorkers
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
          dashboardUid: WebuiDb
          panelId: 15
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "308"
            __dashboardUid__: WebuiDb
            __panelId__: "15"
            message: Too few apache workers idle
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: MW025mB4z
          isPaused: false
    - orgId: 1
      name: Average Ping time (ms) alert
      folder: Salt
      interval: 1m
      rules:
        - uid: Fm02cmf4z
          title: Average Ping time (ms) alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                datasource:
                    type: influxdb
                    uid: "000000001"
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 20s
                measurement: ping
                orderByTime: ASC
                policy: default
                query: SELECT mean("average_response_ms") FROM "ping" WHERE ("host" = 'openqa') AND $timeFilter GROUP BY time($__interval), "url" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 76
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "293"
            __dashboardUid__: WebuiDb
            __panelId__: "76"
            message: |-
                The machine ${tag_url} was not pingable for several minutes.

                Suggested actions:
                * Check if *you* can ping the machine (network connection within the infrastructure might be disrupted)
                * Login over ssh if possible, otherwise use a management interface, e.g. IPMI (machine could be stuck in boot process)
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Fm02cmf4z
          isPaused: false
    - orgId: 1
      name: Broken workers alert
      folder: Salt
      interval: 1m
      rules:
        - uid: dZ025mf4z
          title: Broken workers alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 900
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Number of broken workers
                groupBy:
                    - params:
                        - $__interval
                      type: time
                measurement: postgresql
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - broken_workers
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: min
                refId: B
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 96
          noDataState: NoData
          execErrState: Error
          for: 15m
          annotations:
            __alertId__: "311"
            __dashboardUid__: WebuiDb
            __panelId__: "96"
            message: There is at least one broken worker for more than 15 minutes. Have a look at https://openqa.suse.de/admin/workers to find out which one it is (click the help icon to view the concrete error message).
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: dZ025mf4z
          isPaused: false
    - orgId: 1
      name: CPU Load alert
      folder: Salt
      interval: 1m
      rules:
        - uid: Ji0h5mfVz
          title: CPU Load alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 50
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: 5 Minutes Average
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: system
                orderByTime: ASC
                policy: default
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - load5
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
          dashboardUid: WebuiDb
          panelId: 25
          noDataState: NoData
          execErrState: Error
          for: 10m
          annotations:
            __alertId__: "296"
            __dashboardUid__: WebuiDb
            __panelId__: "25"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Ji0h5mfVz
          isPaused: false
    - orgId: 1
      name: CPU usage alert
      folder: Salt
      interval: 10s
      rules:
        - uid: om0h5mB4k
          title: CPU usage alert
          condition: C
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: iowait
                dsType: influxdb
                groupBy:
                    - params:
                        - $interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 20s
                measurement: cpu
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - usage_iowait
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: cpu
                      operator: =
                      value: cpu-total
                    - condition: AND
                      key: host
                      operator: =
                      value: openqa
            - refId: B
              relativeTimeRange:
                from: 1500
                to: 0
              datasourceUid: "000000001"
              model:
                alias: iowait
                dsType: influxdb
                groupBy:
                    - params:
                        - $interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 20s
                measurement: cpu
                orderByTime: ASC
                policy: default
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - usage_iowait
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: cpu
                      operator: =
                      value: cpu-total
                    - condition: AND
                      key: host
                      operator: =
                      value: openqa
            - refId: C
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 500
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 50
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: median
                refId: C
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 23
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "295"
            __dashboardUid__: WebuiDb
            __panelId__: "23"
            message: |-
                IOwait too high

                Check system journal on the host at the time of alert to see if there are any unexpected events coinciding with the alert.

                https://progress.opensuse.org/issues/69664 describes that a higher IO usage could be related to recent changes to openQA to load more test modules in parallel.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: om0h5mB4k
          isPaused: false
    - orgId: 1
      name: Disk I/O time for /dev/vda (/) alert
      folder: Salt
      interval: 1m
      rules:
        - uid: 2WAh5iBVz
          title: Disk I/O time for /dev/vda (/) alert
          condition: C
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '$tag_name: $col'
                datasource:
                    type: influxdb
                    uid: "000000001"
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                measurement: io_reads
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean(write_time),1s) as "write" FROM "diskio" WHERE  ("host" = 'openqa' AND "name" =~ /^$host_disks$/) AND $timeFilter GROUP BY time($interval), *
                rawQuery: true
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '$tag_name: $col'
                datasource:
                    type: influxdb
                    uid: "000000001"
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                measurement: io_reads
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean(read_time),1s) as "read" FROM "diskio" WHERE  ("host" = 'openqa' AND "name" =~ /^$host_disks$/)  AND $timeFilter GROUP BY time($interval), *
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: C
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 10000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1000
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1000
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: C
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 158
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "473"
            __dashboardUid__: WebuiDb
            __panelId__: "158"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2WAh5iBVz
          isPaused: false
    - orgId: 1
      name: Failed systemd services alert
      folder: Salt
      interval: 10s
      rules:
        - uid: UzAhcmBVk
          title: Failed systemd services alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: systemd_failed
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: sum
                tags:
                    - key: host
                      operator: =
                      value: openqa
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: KToPYLEWz
          panelId: 2
          noDataState: NoData
          execErrState: Error
          for: 3m
          annotations:
            __alertId__: "198"
            __dashboardUid__: KToPYLEWz
            __panelId__: "2"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: UzAhcmBVk
          isPaused: false
    - orgId: 1
      name: Failed systemd services alert (except openqa.suse.de)
      folder: Salt
      interval: 1m
      rules:
        - uid: Uk02cifVkz
          title: Failed systemd services alert (except openqa.suse.de)
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Sum of failed systemd services
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: systemd_failed
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: sum
                tags:
                    - key: host
                      operator: '!='
                      value: openqa
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: KToPYLEWz
          panelId: 6
          noDataState: NoData
          execErrState: Error
          for: 15m
          annotations:
            __alertId__: "199"
            __dashboardUid__: KToPYLEWz
            __panelId__: "6"
            message: |-
                Check failed systemd services on hosts with `systemctl --failed`.

                Hint: Go to parent dashboard https://stats.openqa-monitor.qa.suse.de/d/KToPYLEWz/failed-systemd-services to see a list of affected hosts.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Uk02cifVkz
          isPaused: false
    - orgId: 1
      name: File systems alert
      folder: Salt
      interval: 1m
      rules:
        - uid: ai0h5ifVk
          title: File systems alert
          condition: F
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '/assets: Used Percentage'
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: disk
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") FROM "disk" WHERE ("host" = 'openqa' AND "path" = '/assets') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - used_percent
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: path
                      operator: =
                      value: /assets
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '/: Used Percentage'
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") FROM "disk" WHERE ("host" = 'openqa' AND "path" = '/') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '/results: Used Percentage'
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") FROM "disk" WHERE ("host" = 'openqa' AND "path" = '/results') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: D
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '/srv: Used Percentage'
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") FROM "disk" WHERE ("host" = 'openqa' AND "path" = '/srv') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: D
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: E
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: '/space-slow: Used Percentage'
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") FROM "disk" WHERE ("host" = 'openqa' AND "path" = '/space-slow') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: E
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: F
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - D
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - E
                      reducer:
                        type: avg
                refId: F
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 74
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "297"
            __dashboardUid__: WebuiDb
            __panelId__: "74"
            message: One of the file systems is too full
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ai0h5ifVk
          isPaused: false
    - orgId: 1
      name: HTTP Response alert
      folder: Salt
      interval: 1m
      rules:
        - uid: tm0h5mf4k
          title: HTTP Response alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Response of /tests
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 65s
                measurement: http_response
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - response_time
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: server
                      operator: =
                      value: https://openqa.suse.de/tests
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 4
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 78
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "294"
            __dashboardUid__: WebuiDb
            __panelId__: "78"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: tm0h5mf4k
          isPaused: false
    - orgId: 1
      name: Incomplete jobs (not restarted) of last 24h alert
      folder: Salt
      interval: 1m
      rules:
        - uid: cXo2cmBVk
          title: Incomplete jobs (not restarted) of last 24h alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 60
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Incompletes (not restarted) of last 24h
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: ""
                measurement: postgresql
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - incompletes_not_restarted_last_24h
                        type: field
                      - params: []
                        type: distinct
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 300
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: nRDab3Jiz
          panelId: 17
          noDataState: NoData
          execErrState: Error
          for: 10m
          annotations:
            __alertId__: "203"
            __dashboardUid__: nRDab3Jiz
            __panelId__: "17"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: cXo2cmBVk
          isPaused: false
    - orgId: 1
      name: InfluxDB not reachable
      folder: Salt
      interval: 10s
      rules:
        - uid: 2WA2cmfVzz
          title: InfluxDB not reachable
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - no-data-query
                      reducer:
                        type: last
                refId: A
                type: classic_conditions
            - refId: no-data-query
              relativeTimeRange:
                from: 10
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy: []
                measurement: non-existant
                orderByTime: ASC
                policy: default
                refId: no-data-query
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                tags: []
          dashboardUid: EML0bpuGk
          panelId: 2
          noDataState: OK
          execErrState: Alerting
          for: 20m
          annotations:
            __alertId__: "312"
            __dashboardUid__: EML0bpuGk
            __panelId__: "2"
            message: InfluxDB not reachable for too long. The means the rest of the monitoring is currently broken. Check `systemctl status influxdb.service` on the monitoring host. InfluxDB is supposed to respond to HTTP requests on port 8086, use e.g. `curl http://localhost:8086/query` on the monitoring host to verify whether it responds.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2WA2cmfVzz
          isPaused: false
    - orgId: 1
      name: Job age (scheduled) (max) alert
      folder: Salt
      interval: 1h
      rules:
        - uid: XzAh5mfVz
          title: Job age (scheduled) (max) alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: 50% percentile (max)
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 2m
                measurement: postgresql
                orderByTime: ASC
                policy: default
                query: SELECT mean("value") FROM "measurement" WHERE $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - job_age_p50
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 345600
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 7W06NBWGk
          panelId: 2
          noDataState: NoData
          execErrState: Error
          for: 3h
          annotations:
            __alertId__: "224"
            __dashboardUid__: 7W06NBWGk
            __panelId__: "2"
            message: |-
                Jobs not scheduled for 4 days (345600s).

                Possible reasons:

                * There are no online workers for selected scheduled jobs, misconfiguration on the side of tests likely

                See https://progress.opensuse.org/issues/73174#note-2 for an explanation of the selection of the specific value
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: XzAh5mfVz
          isPaused: true
    - orgId: 1
      name: Job age (scheduled) (median) alert
      folder: Salt
      interval: 5m
      rules:
        - uid: QkA25iBVk
          title: Job age (scheduled) (median) alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 900
                to: 0
              datasourceUid: "000000001"
              model:
                alias: 50% percentile (median)
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 2m
                measurement: postgresql
                orderByTime: ASC
                policy: default
                query: SELECT mean("value") FROM "measurement" WHERE $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - job_age_p50
                        type: field
                      - params: []
                        type: median
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 259200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: median
                refId: B
                type: classic_conditions
          dashboardUid: 7W06NBWGk
          panelId: 5
          noDataState: NoData
          execErrState: Error
          for: 3h
          annotations:
            __alertId__: "223"
            __dashboardUid__: 7W06NBWGk
            __panelId__: "5"
            message: |-
                Check for overall decrease of "time to start".

                Possible reasons for regression:

                * Not enough ressources
                * Too many tests scheduled due to misconfiguration

                2020-11-27: Alert limit set to 259200s = 3d, see https://progress.opensuse.org/issues/73174#note-2 about the decision

                Related progress issue: https://progress.opensuse.org/issues/65975
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QkA25iBVk
          isPaused: true
    - orgId: 1
      name: Memory usage alert
      folder: Salt
      interval: 1m
      rules:
        - uid: Ci0h5mfVz
          title: Memory usage alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: mem
                orderByTime: ASC
                policy: default
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - available
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
          dashboardUid: WebuiDb
          panelId: 68
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "300"
            __dashboardUid__: WebuiDb
            __panelId__: "68"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Ci0h5mfVz
          isPaused: false
    - orgId: 1
      name: NTP offset alert
      folder: Salt
      interval: 1m
      rules:
        - uid: em025mfVz
          title: NTP offset alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 900
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 20s
                measurement: chrony
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 6000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: min
                    - evaluator:
                        params:
                            - -6000
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 86
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "301"
            __dashboardUid__: WebuiDb
            __panelId__: "86"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: em025mfVz
          isPaused: false
    - orgId: 1
      name: New incompletes alert
      folder: Salt
      interval: 10s
      rules:
        - uid: dXThcmf4k
          title: New incompletes alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 60
                to: 0
              datasourceUid: "000000001"
              model:
                alias: New incompletes
                groupBy:
                    - params:
                        - $__interval
                      type: time
                interval: ""
                measurement: postgresql
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - incompletes_last_24h
                        type: field
                      - params: []
                        type: distinct
                      - params: []
                        type: non_negative_difference
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: nRDab3Jiz
          panelId: 16
          noDataState: NoData
          execErrState: Error
          for: 30s
          annotations:
            __alertId__: "200"
            __dashboardUid__: nRDab3Jiz
            __panelId__: "16"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: dXThcmf4k
          isPaused: false
    - orgId: 1
      name: Open database connections by user alert
      folder: Salt
      interval: 1m
      rules:
        - uid: SW025iB4k
          title: Open database connections by user alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 90
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - D
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: D
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: TOTAL
                groupBy:
                    - params:
                        - 10s
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: postgresql
                orderByTime: ASC
                policy: default
                query: SELECT sum("open_connections") FROM "postgresql" WHERE $timeFilter GROUP BY time(10s) fill(null)
                rawQuery: false
                refId: D
                resultFormat: time_series
                select:
                    - - params:
                            - open_connections
                        type: field
                      - params: []
                        type: sum
                tags: []
          dashboardUid: WebuiDb
          panelId: 2
          noDataState: Alerting
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "309"
            __dashboardUid__: WebuiDb
            __panelId__: "2"
            message: |-
                90% of postgresql connections reached or connections are already not possible any more. Check on OSD what query is blocking with e.g.:

                ```
                SELECT datid, datname, pid, usesysid, usename, query_start, state, query FROM pg_stat_activity WHERE state = 'active' ORDER BY query_start LIMIT 10;
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: SW025iB4k
          isPaused: false
    - orgId: 1
      name: Packet loss between worker hosts and other hosts alert
      folder: Salt
      interval: 1m
      rules:
        - uid: 2Z025iB4km
          title: Packet loss between worker hosts and other hosts alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_host - $tag_url
                datasource:
                    type: influxdb
                    uid: "000000001"
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - host
                      type: tag
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                query: SELECT mean("percent_packet_loss") FROM "ping" AND $timeFilter GROUP BY time($__interval), "url" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - percent_packet_loss
                        type: field
                      - params: []
                        type: mean
                tags: []
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 50
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: EML0bpuGk
          panelId: 4
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "519"
            __dashboardUid__: EML0bpuGk
            __panelId__: "4"
            message: |-
                At least one host listed under `required_external_networks` in `workerconf.sls` in the pillars repository is not pingable from at least one openQA worker host.

                Check the panel associated with the alert. The legend table on the right shows the problematic hosts on top.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2Z025iB4km
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: zjT2cifVk
          title: 'QA-Power8-4-kvm: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'QA-Power8-4-kvm' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "103"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zjT2cifVk
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: SCT25if4k
          title: 'QA-Power8-4-kvm: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'QA-Power8-4-kvm') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "401"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: SCT25if4k
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _rT2cmBVz
          title: 'QA-Power8-4-kvm: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'QA-Power8-4-kvm' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "99"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _rT2cmBVz
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ijThcmB4z
          title: 'QA-Power8-4-kvm: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'QA-Power8-4-kvm') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "104"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ijThcmB4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: rrohciBVk
          title: 'QA-Power8-4-kvm: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "101"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: rrohciBVk
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: HjT25mB4z
          title: 'QA-Power8-4-kvm: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "411"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: HjT25mB4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Mjo25iBVk
          title: 'QA-Power8-4-kvm: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "207"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on QA-Power8-4-kvm.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N QA-Power8-4-kvm`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Mjo25iBVk
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 7johcmf4z
          title: 'QA-Power8-4-kvm: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-4-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "284"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 7johcmf4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-4-kvm: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: eroh5mf4z
          title: 'QA-Power8-4-kvm: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'QA-Power8-4-kvm' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDQA-Power8-4-kvm
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "102"
            __dashboardUid__: WDQA-Power8-4-kvm
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: eroh5mf4z
          isPaused: false
    - orgId: 1
      name: QA-Power8-5-kvm-qa.suse.de offline
      folder: Salt
      interval: 1m
      rules:
        - uid: dzAh5iBVzz
          title: QA-Power8-5-kvm-qa.suse.de offline
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                datasource:
                    type: influxdb
                    uid: "000000001"
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: QA-Power8-5-kvm.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 8
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "520"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "8"
            message: Triggering reset of QA-Power8-5-kvm - see https://gitlab.suse.de/openqa/grafana-webhook-actions/-/jobs for details, status and history
          labels:
            __contacts__: '"Reset qa-power8-5-kvm"'
            rule_uid: dzAh5iBVzz
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 2jT25iB4k
          title: 'QA-Power8-5-kvm: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'QA-Power8-5-kvm' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "109"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2jT25iB4k
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: fCohcif4z
          title: 'QA-Power8-5-kvm: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'QA-Power8-5-kvm') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "403"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: fCohcif4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: djohcmf4z
          title: 'QA-Power8-5-kvm: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'QA-Power8-5-kvm' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "105"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: djohcmf4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: oCo25iBVk
          title: 'QA-Power8-5-kvm: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'QA-Power8-5-kvm') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "110"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: oCo25iBVk
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: FjTh5mB4z
          title: 'QA-Power8-5-kvm: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "107"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: FjTh5mB4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: PjThcmfVz
          title: 'QA-Power8-5-kvm: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "409"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: PjThcmfVz
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 0jTh5iB4z
          title: 'QA-Power8-5-kvm: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "208"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on QA-Power8-5-kvm.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N QA-Power8-5-kvm`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 0jTh5iB4z
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: bCo25mB4k
          title: 'QA-Power8-5-kvm: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: QA-Power8-5-kvm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "278"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: bCo25mB4k
          isPaused: false
    - orgId: 1
      name: 'QA-Power8-5-kvm: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 5Co25iBVk
          title: 'QA-Power8-5-kvm: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'QA-Power8-5-kvm' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDQA-Power8-5-kvm
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "108"
            __dashboardUid__: WDQA-Power8-5-kvm
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 5Co25iBVk
          isPaused: false
    - orgId: 1
      name: 'Queue: State (SUSE) alert'
      folder: Salt
      interval: 10s
      rules:
        - uid: FuT2cmf4k
          title: 'Queue: State (SUSE) alert'
          condition: C
          data:
            - refId: A
              relativeTimeRange:
                from: 43200
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Scheduled+Blocked
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 40s
                measurement: openqa_jobs
                orderByTime: ASC
                policy: default
                query: SELECT mean("scheduled")+mean("blocked") FROM "openqa_jobs" WHERE ("url" = 'https://openqa.suse.de') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - scheduled
                        type: field
                tags:
                    - key: url
                      operator: =
                      value: https://openqa.suse.de
            - refId: B
              relativeTimeRange:
                from: 60
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Scheduled+Blocked
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 40s
                measurement: openqa_jobs
                orderByTime: ASC
                policy: default
                query: SELECT mean("scheduled")+mean("blocked") FROM "openqa_jobs" WHERE ("url" = 'https://openqa.suse.de') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - scheduled
                        type: field
                tags:
                    - key: url
                      operator: =
                      value: https://openqa.suse.de
            - refId: C
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 8000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - running
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 12000
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - blocked
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 14000
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 10000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: C
                type: classic_conditions
            - refId: blocked
              relativeTimeRange:
                from: 60
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Blocked
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 40s
                measurement: openqa_jobs
                orderByTime: ASC
                policy: default
                query: SELECT mean("blocked") FROM "openqa_jobs" WHERE ("url" = 'https://openqa.suse.de') AND $timeFilter GROUP BY time($__interval) fill(null)
                rawQuery: false
                refId: blocked
                resultFormat: time_series
                select:
                    - - params:
                            - blocked
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: https://openqa.suse.de
            - refId: running
              relativeTimeRange:
                from: 60
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Running
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 40s
                measurement: openqa_jobs
                orderByTime: ASC
                policy: default
                refId: running
                resultFormat: time_series
                select:
                    - - params:
                            - running
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: https://openqa.suse.de
          dashboardUid: nRDab3Jiz
          panelId: 9
          noDataState: NoData
          execErrState: Error
          for: 1m
          annotations:
            __alertId__: "201"
            __dashboardUid__: nRDab3Jiz
            __panelId__: "9"
            message: "If thresholds are exceeded investigate the following:\n* Are our workers actually working on a reasonable amount of jobs (e.g. running is not near-zero while there are many scheduled jobs)\n* What component/user/system triggers jobs, see https://openqa.suse.de/admin/productlog\n* Find out if there any obvious problems visible on https://openqa.suse.de/tests\n* Calculate the ratio of cloned scheduled jobs to find out if there is a high number of unexpected clones (by users or systems or due to crashing workers, etc.), e.g. using the following SQL query:\n\n```\nselect round ((select count(j1.id) from jobs as j1 where state = 'scheduled' and (select j2.id from jobs as j2 where j1.id = j2.clone_id limit 1) is not null) * 100. / (select count(id) from jobs where state = 'scheduled'), 2) as \"percentage of clones in all scheduled jobs\";\n percentage of clones in all scheduled jobs \n--------------------------------------------\n                                      10.11\n(1 row)\n```\n\n* Find out if most jobs come from particular products, flavors, build, e.g. using something like the following SQL query example for build matching \"livepatch\" or \"kgraft\" in a certain timespan (keep in mind that the database timestamps are in UTC):\n\n```\nselect count(id) from jobs where t_created >= '2021-09-14 17:00' and t_created <= '2021-09-14 18:00' and (build like '%livepatch%' or build like '%kgraft%');\n```\n\n* Especially for SUSE QA maintenance tests look into the incident scheduling pipelines in https://gitlab.suse.de/qa-maintenance/bot-ng/-/pipelines\n\nAlso see https://progress.opensuse.org/issues/98667 for details."
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: FuT2cmf4k
          isPaused: false
    - orgId: 1
      name: Ratio of multi-machine tests by result alert
      folder: Salt
      interval: 2m
      rules:
        - uid: 0XohcmfVk
          title: Ratio of multi-machine tests by result alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 60
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - ratio_mm_failed
                      reducer:
                        type: last
                refId: A
                type: classic_conditions
            - refId: ratio_mm_failed
              relativeTimeRange:
                from: 120
                to: 0
              datasourceUid: "000000001"
              model:
                alias: ratio_mm_failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - result
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 2m
                measurement: postgresql
                orderByTime: ASC
                policy: default
                refId: ratio_mm_failed
                resultFormat: time_series
                select:
                    - - params:
                            - ratio_mm
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: result
                      operator: =
                      value: failed
          dashboardUid: nRDab3Jiz
          panelId: 24
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "358"
            __dashboardUid__: nRDab3Jiz
            __panelId__: "24"
            message: |-
                Investigation hints:
                * Investigate what caused the ratio to change that significantly
                * Check https://openqa.suse.de/tests?resultfilter=Failed and look for a correlation
                * Follow https://progress.opensuse.org/projects/openqatests/wiki/Wiki#Statistical-investigation

                See https://progress.opensuse.org/issues/96191 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 0XohcmfVk
          isPaused: false
    - orgId: 1
      name: SSL expiration alert
      folder: Salt
      interval: 1h
      rules:
        - uid: FZ0hciBVz
          title: SSL expiration alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: SSL expiration
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - common_name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1h
                measurement: x509_cert
                orderByTime: ASC
                policy: default
                query: SELECT (bottom(expiry,common_name,1)/60/60/24) as exp,common_name FROM "x509_cert" WHERE time >= now() - 1h
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - expiry
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: common_name
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 604800
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WebuiDb
          panelId: 98
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "360"
            __dashboardUid__: WebuiDb
            __panelId__: "98"
            message: |-
                The SSL certificate for the openQA webUI is nearing expiration.

                Related progress issue: https://progress.opensuse.org/issues/103149
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: FZ0hciBVz
          isPaused: false
    - orgId: 1
      name: '[openqa] openqaworker-arm-1 online (long-time) alert'
      folder: Salt
      interval: 15m
      rules:
        - uid: Nk0h5mB4z
          title: '[openqa] openqaworker-arm-1 online (long-time) alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-1.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 5
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "204"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "5"
            message: |-
                The IPMI management interface for this machine is inaccessible (again). The machine itself is also not reachable over ping.

                Suggested action: Reset the machine including the management interface.

                Similar issues were handled in https://infra.nue.suse.com/SelfService/Update.html?id=174650 and https://infra.nue.suse.com/SelfService/Display.html?id=166330 and https://infra.nue.suse.com/SelfService/Display.html?id=164419 and https://infra.nue.suse.com/SelfService/Display.html?id=153124 for the same machine
          labels:
            rule_uid: Nk0h5mB4z
          isPaused: false
    - orgId: 1
      name: '[openqa] openqaworker-arm-2 online (long-time) alert'
      folder: Salt
      interval: 15m
      rules:
        - uid: DzAhcifVk
          title: '[openqa] openqaworker-arm-2 online (long-time) alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-2.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 6
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "205"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "6"
            message: |-
                The IPMI management interface for this machine is inaccessible (again). The machine itself is also not reachable over ping.

                Suggested action: Reset the machine including the management interface.

                Similar issues were handled in https://infra.nue.suse.com/SelfService/Update.html?id=174650 and https://infra.nue.suse.com/SelfService/Display.html?id=166330 and https://infra.nue.suse.com/SelfService/Display.html?id=164419 and https://infra.nue.suse.com/SelfService/Display.html?id=153124 for the same machine
          labels:
            rule_uid: DzAhcifVk
          isPaused: false
    - orgId: 1
      name: '[openqa] openqaworker-arm-3 online (long-time) alert'
      folder: Salt
      interval: 15m
      rules:
        - uid: dzA25mfVk
          title: '[openqa] openqaworker-arm-3 online (long-time) alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-3.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 7
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "206"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "7"
            message: |-
                The IPMI management interface for this machine is inaccessible (again). The machine itself is also not reachable over ping.

                Suggested action: Reset the machine including the management interface.

                Similar issues were handled in https://infra.nue.suse.com/SelfService/Update.html?id=174650 and https://infra.nue.suse.com/SelfService/Display.html?id=166330 and https://infra.nue.suse.com/SelfService/Display.html?id=164419 and https://infra.nue.suse.com/SelfService/Display.html?id=153124 for the same machine
          labels:
            rule_uid: dzA25mfVk
          isPaused: false
    - orgId: 1
      name: apache2.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: eXo25if4z
          title: apache2.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/apache2.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 16
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "70"
            __dashboardUid__: webuiSyS
            __panelId__: "16"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: eXo25if4z
          isPaused: false
    - orgId: 1
      name: 'backup-vm: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: eZ02cmfVz
          title: 'backup-vm: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'backup-vm' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: backup-vm
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDbackup-vm
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "326"
            __dashboardUid__: GDbackup-vm
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: eZ02cmfVz
          isPaused: false
    - orgId: 1
      name: 'backup-vm: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: QWA2cmf4k
          title: 'backup-vm: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'backup-vm' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDbackup-vm
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "319"
            __dashboardUid__: GDbackup-vm
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QWA2cmf4k
          isPaused: false
    - orgId: 1
      name: 'backup-vm: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: rW0hcifVk
          title: 'backup-vm: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'backup-vm') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: backup-vm
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbackup-vm
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "324"
            __dashboardUid__: GDbackup-vm
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: rW0hcifVk
          isPaused: false
    - orgId: 1
      name: 'backup-vm: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _W02cmBVk
          title: 'backup-vm: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: backup.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbackup-vm
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "320"
            __dashboardUid__: GDbackup-vm
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _W02cmBVk
          isPaused: false
    - orgId: 1
      name: 'backup-vm: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: uZ025mfVk
          title: 'backup-vm: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: backup.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbackup-vm
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "321"
            __dashboardUid__: GDbackup-vm
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: uZ025mfVk
          isPaused: false
    - orgId: 1
      name: 'backup-vm: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: jWAhcif4k
          title: 'backup-vm: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'backup-vm' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDbackup-vm
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "325"
            __dashboardUid__: GDbackup-vm
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jWAhcif4k
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: FVAh5mfVz
          title: 'baremetal-support: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'baremetal-support' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: baremetal-support
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDbaremetal-support
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "537"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: FVAh5mfVz
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: S4AhcifVk
          title: 'baremetal-support: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'baremetal-support' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDbaremetal-support
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "533"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: S4AhcifVk
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: cV0hciBVz
          title: 'baremetal-support: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'baremetal-support') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: baremetal-support
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbaremetal-support
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "538"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: cV0hciBVz
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: H4A25iB4k
          title: 'baremetal-support: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: baremetal-support
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbaremetal-support
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "534"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: H4A25iB4k
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: DVA2cmBVz
          title: 'baremetal-support: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: baremetal-support
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDbaremetal-support
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "535"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: DVA2cmBVz
          isPaused: false
    - orgId: 1
      name: 'baremetal-support: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: dV02cmB4k
          title: 'baremetal-support: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'baremetal-support' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDbaremetal-support
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "536"
            __dashboardUid__: GDbaremetal-support
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: dV02cmB4k
          isPaused: false
    - orgId: 1
      name: cron.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: quo25ifVz
          title: cron.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/cron.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 15
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "68"
            __dashboardUid__: webuiSyS
            __panelId__: "15"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: quo25ifVz
          isPaused: false
    - orgId: 1
      name: 'grenache-1: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: L3Th5iBVk
          title: 'grenache-1: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'grenache-1' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDgrenache-1
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "151"
            __dashboardUid__: WDgrenache-1
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: L3Th5iBVk
          isPaused: false
    - orgId: 1
      name: 'grenache-1: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _3ohcmf4k
          title: 'grenache-1: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'grenache-1') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDgrenache-1
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "389"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _3ohcmf4k
          isPaused: false
    - orgId: 1
      name: 'grenache-1: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 23o2ciB4k
          title: 'grenache-1: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'grenache-1' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDgrenache-1
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "147"
            __dashboardUid__: WDgrenache-1
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 23o2ciB4k
          isPaused: false
    - orgId: 1
      name: 'grenache-1: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: P3o25mfVz
          title: 'grenache-1: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'grenache-1') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDgrenache-1
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "152"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: P3o25mfVz
          isPaused: false
    - orgId: 1
      name: 'grenache-1: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: J3Th5mB4z
          title: 'grenache-1: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDgrenache-1
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "149"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: J3Th5mB4z
          isPaused: false
    - orgId: 1
      name: 'grenache-1: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: r3o2cmB4k
          title: 'grenache-1: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDgrenache-1
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "405"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: r3o2cmB4k
          isPaused: false
    - orgId: 1
      name: 'grenache-1: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Uqoh5mfVk
          title: 'grenache-1: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
          dashboardUid: WDgrenache-1
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "218"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on grenache-1.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N grenache-1`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Uqoh5mfVk
          isPaused: false
    - orgId: 1
      name: 'grenache-1: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: QqT25iBVz
          title: 'grenache-1: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: grenache-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDgrenache-1
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "285"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QqT25iBVz
          isPaused: false
    - orgId: 1
      name: 'grenache-1: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: a3o2cifVz
          title: 'grenache-1: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'grenache-1' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDgrenache-1
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "150"
            __dashboardUid__: WDgrenache-1
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: a3o2cifVz
          isPaused: false
    - orgId: 1
      name: 'jenkins: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: yn0h5mf4k
          title: 'jenkins: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'jenkins' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: jenkins
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDjenkins
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "496"
            __dashboardUid__: GDjenkins
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: yn0h5mf4k
          isPaused: false
    - orgId: 1
      name: 'jenkins: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: bn0hcif4k
          title: 'jenkins: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'jenkins' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDjenkins
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "492"
            __dashboardUid__: GDjenkins
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: bn0hcif4k
          isPaused: false
    - orgId: 1
      name: 'jenkins: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: UnA2cmBVz
          title: 'jenkins: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'jenkins') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: jenkins
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDjenkins
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "497"
            __dashboardUid__: GDjenkins
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: UnA2cmBVz
          isPaused: false
    - orgId: 1
      name: 'jenkins: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: -n0hcifVk
          title: 'jenkins: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: jenkins.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDjenkins
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "493"
            __dashboardUid__: GDjenkins
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: -n0hcifVk
          isPaused: false
    - orgId: 1
      name: 'jenkins: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: f7Ah5ifVz
          title: 'jenkins: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: jenkins.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDjenkins
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "494"
            __dashboardUid__: GDjenkins
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: f7Ah5ifVz
          isPaused: false
    - orgId: 1
      name: 'jenkins: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: EnA25ifVz
          title: 'jenkins: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'jenkins' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDjenkins
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "495"
            __dashboardUid__: GDjenkins
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: EnA25ifVz
          isPaused: false
    - orgId: 1
      name: 'malbec: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: z6o25iB4z
          title: 'malbec: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'malbec' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: malbec
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDmalbec
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "157"
            __dashboardUid__: WDmalbec
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: z6o25iB4z
          isPaused: false
    - orgId: 1
      name: 'malbec: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: S6T2cmfVk
          title: 'malbec: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'malbec') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDmalbec
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "391"
            __dashboardUid__: WDmalbec
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: S6T2cmfVk
          isPaused: false
    - orgId: 1
      name: 'malbec: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: C3o25iB4k
          title: 'malbec: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'malbec' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDmalbec
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "153"
            __dashboardUid__: WDmalbec
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: C3o25iB4k
          isPaused: false
    - orgId: 1
      name: 'malbec: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ZeT25iBVz
          title: 'malbec: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'malbec') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDmalbec
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "158"
            __dashboardUid__: WDmalbec
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ZeT25iBVz
          isPaused: false
    - orgId: 1
      name: 'malbec: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 3qo25if4z
          title: 'malbec: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDmalbec
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "155"
            __dashboardUid__: WDmalbec
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3qo25if4z
          isPaused: false
    - orgId: 1
      name: 'malbec: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: N6o25iBVz
          title: 'malbec: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDmalbec
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "408"
            __dashboardUid__: WDmalbec
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: N6o25iBVz
          isPaused: false
    - orgId: 1
      name: 'malbec: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Geoh5iB4k
          title: 'malbec: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
          dashboardUid: WDmalbec
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "221"
            __dashboardUid__: WDmalbec
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on malbec.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N malbec`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Geoh5iB4k
          isPaused: false
    - orgId: 1
      name: 'malbec: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 76oh5ifVk
          title: 'malbec: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: malbec
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDmalbec
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "310"
            __dashboardUid__: WDmalbec
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 76oh5ifVk
          isPaused: false
    - orgId: 1
      name: 'malbec: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: g6o2ciB4k
          title: 'malbec: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'malbec' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDmalbec
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "156"
            __dashboardUid__: WDmalbec
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: g6o2ciB4k
          isPaused: false
    - orgId: 1
      name: monitor.qa.suse.de - SSL expiration
      folder: Salt
      interval: 1h
      rules:
        - uid: 3MA2cmf4k
          title: monitor.qa.suse.de - SSL expiration
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_source validity left
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - source
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1h
                measurement: x509_cert
                orderByTime: ASC
                policy: default
                query: SELECT last("expiry") FROM "x509_cert" WHERE ("common_name" = 'monitor.qa.suse.de' AND "source" =~ /.pem$/) AND $timeFilter GROUP BY time($__interval), "source" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - expiry
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: common_name
                      operator: =
                      value: monitor.qa.suse.de
                    - condition: AND
                      key: source
                      operator: =~
                      value: /.pem$/
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 604800
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: E9tyiQ17k
          panelId: 7
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "366"
            __dashboardUid__: E9tyiQ17k
            __panelId__: "7"
            message: |-
                One of the TLS certificates (fullchain.pem) located in /etc/dehydrated/certs on monitor.qa.suse.de is nearing expiration.
                The most likely issue is dehydrated not being able to reach our CA. Check the dehydrated logs for further issues.

                Notes about the dehydrated setup can be found in https://progress.opensuse.org/issues/103149
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3MA2cmf4k
          isPaused: false
    - orgId: 1
      name: openQA job fail ratio alert
      folder: Salt
      interval: 2m
      rules:
        - uid: hXT2cif4z
          title: openQA job fail ratio alert
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - ratio_failed_p
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: ratio_failed_p
              relativeTimeRange:
                from: 120
                to: 0
              datasourceUid: "000000001"
              model:
                alias: ratio of failed openQA jobs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                interval: 2m
                measurement: postgresql
                orderByTime: ASC
                policy: default
                refId: ratio_failed_p
                resultFormat: time_series
                select:
                    - - params:
                            - ratio_failed_p
                        type: field
                      - params: []
                        type: last
                tags: []
          dashboardUid: nRDab3Jiz
          panelId: 21
          noDataState: NoData
          execErrState: Error
          for: 2m
          annotations:
            __alertId__: "357"
            __dashboardUid__: nRDab3Jiz
            __panelId__: "21"
            message: |-
                Ratio of failed vs. all jobs over time exceeds threshold. Check for general problems causing unexpected false-positive test failures

                https://progress.opensuse.org/issues/96191
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: hXT2cif4z
          isPaused: false
    - orgId: 1
      name: openqa-gru.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: buo2ciB4k
          title: openqa-gru.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/openqa-gru.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 2
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "55"
            __dashboardUid__: webuiSyS
            __panelId__: "2"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: buo2ciB4k
          isPaused: false
    - orgId: 1
      name: openqa-livehandler.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: fuThcif4z
          title: openqa-livehandler.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/openqa-livehandler.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 4
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "57"
            __dashboardUid__: webuiSyS
            __panelId__: "4"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: fuThcif4z
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: NKAhcmfVz
          title: 'openqa-piworker: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqa-piworker' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqa-piworker
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDopenqa-piworker
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "641"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: NKAhcmfVz
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ZK02cmB4k
          title: 'openqa-piworker: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'openqa-piworker' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDopenqa-piworker
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "637"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ZK02cmB4k
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: OK025mf4k
          title: 'openqa-piworker: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqa-piworker') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa-piworker
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqa-piworker
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "642"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: OK025mf4k
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: nKAh5iB4z
          title: 'openqa-piworker: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqa-piworker.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqa-piworker
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "638"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: nKAh5iB4z
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 4K0h5iBVz
          title: 'openqa-piworker: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqa-piworker.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqa-piworker
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "639"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4K0h5iBVz
          isPaused: false
    - orgId: 1
      name: 'openqa-piworker: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: IF02cmf4z
          title: 'openqa-piworker: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqa-piworker' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDopenqa-piworker
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "640"
            __dashboardUid__: GDopenqa-piworker
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: IF02cmf4z
          isPaused: false
    - orgId: 1
      name: openqa-scheduler.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: Yuo2cifVk
          title: openqa-scheduler.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/openqa-scheduler.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 5
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "58"
            __dashboardUid__: webuiSyS
            __panelId__: "5"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Yuo2cifVk
          isPaused: false
    - orgId: 1
      name: openqa-websockets.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: EXThcmfVk
          title: openqa-websockets.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/openqa-websockets.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 6
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "59"
            __dashboardUid__: webuiSyS
            __panelId__: "6"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: EXThcmfVk
          isPaused: false
    - orgId: 1
      name: openqa-webui.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: -uThcmfVz
          title: openqa-webui.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/openqa-webui.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 3
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "56"
            __dashboardUid__: webuiSyS
            __panelId__: "3"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: -uThcmfVz
          isPaused: false
    - orgId: 1
      name: openqa.suse.de - SSL expiration
      folder: Salt
      interval: 1h
      rules:
        - uid: CMAhcmfVz
          title: openqa.suse.de - SSL expiration
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_source validity left
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - source
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1h
                measurement: x509_cert
                orderByTime: ASC
                policy: default
                query: SELECT last("expiry") FROM "x509_cert" WHERE ("common_name" = 'openqa.suse.de' AND "source" =~ /.pem$/) AND $timeFilter GROUP BY time($__interval), "source" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - expiry
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: common_name
                      operator: =
                      value: openqa.suse.de
                    - condition: AND
                      key: source
                      operator: =~
                      value: /.pem$/
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 604800
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: E9tyiQ17k
          panelId: 4
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "364"
            __dashboardUid__: E9tyiQ17k
            __panelId__: "4"
            message: |-
                One of the TLS certificates (fullchain.pem) located in /etc/dehydrated/certs on openqa.suse.de is nearing expiration.
                The most likely issue is dehydrated not being able to reach our CA. Check the dehydrated logs for further issues.

                Notes about the dehydrated setup can be found in https://progress.opensuse.org/issues/103149
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: CMAhcmfVz
          isPaused: false
    - orgId: 1
      name: 'openqa.suse.de: SAN validity'
      folder: Salt
      interval: 1h
      rules:
        - uid: eM025iB4k
          title: 'openqa.suse.de: SAN validity'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_source validity left
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - source
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1h
                measurement: x509_cert
                orderByTime: ASC
                policy: default
                query: SELECT (bottom(expiry,common_name,1)/60/60/24) as exp,common_name FROM "x509_cert" WHERE time >= now() - 1h
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - expiry
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: common_name
                      operator: =
                      value: monitor.qa.suse.de
                    - condition: AND
                      key: source
                      operator: '!~'
                      value: /.pem$/
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 604800
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: E9tyiQ17k
          panelId: 8
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "367"
            __dashboardUid__: E9tyiQ17k
            __panelId__: "8"
            message: |-
                One of the SAN endpoints on monitor.qa.suse.de is nearing expiration.
                The most likely issue is that the service serving this SAN (e.g. apache2) on the host monitor.qa.suse.de was not restarted/reloaded after a new certificate got fetched.

                As a short term solution you can manually restart the service but please also open a ticket because it indicates that our salt automation does not cover all service restarts.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: eM025iB4k
          isPaused: false
    - orgId: 1
      name: 'openqa.suse.de: SAN validity jG02cmBVzz'
      folder: Salt
      interval: 1h
      rules:
        - uid: jG02cmBVzz
          title: 'openqa.suse.de: SAN validity jG02cmBVzz'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_source validity left
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - source
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1h
                measurement: x509_cert
                orderByTime: ASC
                policy: default
                query: SELECT (bottom(expiry,common_name,1)/60/60/24) as exp,common_name FROM "x509_cert" WHERE time >= now() - 1h
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - expiry
                        type: field
                      - params: []
                        type: last
                tags:
                    - key: common_name
                      operator: =
                      value: openqa.suse.de
                    - condition: AND
                      key: source
                      operator: '!~'
                      value: /.pem$/
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 604800
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: E9tyiQ17k
          panelId: 5
          noDataState: NoData
          execErrState: Error
          for: 1h
          annotations:
            __alertId__: "365"
            __dashboardUid__: E9tyiQ17k
            __panelId__: "5"
            message: |-
                One of the SAN endpoints on openqa.suse.de is nearing expiration.
                The most likely issue is that the service serving this SAN (e.g. apache2) on the host openqa.suse.de was not restarted/reloaded after a new certificate got fetched.

                As a short term solution you can manually restart the service but please also open a ticket because it indicates that our salt automation does not cover all service restarts.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jG02cmBVzz
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: XcA25mf4k
          title: 'openqaw5-xen: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaw5-xen' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaw5-xen
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDopenqaw5-xen
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "674"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: XcA25mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: PcAh5mB4k
          title: 'openqaw5-xen: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'openqaw5-xen' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDopenqaw5-xen
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "670"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: PcAh5mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: CcA25mB4k
          title: 'openqaw5-xen: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaw5-xen') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaw5-xen
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqaw5-xen
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "675"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: CcA25mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: y5AhcmB4k
          title: 'openqaw5-xen: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaw5-xen.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqaw5-xen
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "671"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: y5AhcmB4k
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 85AhcmfVz
          title: 'openqaw5-xen: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaw5-xen.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDopenqaw5-xen
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "672"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 85AhcmfVz
          isPaused: false
    - orgId: 1
      name: 'openqaw5-xen: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: lcAhcifVk
          title: 'openqaw5-xen: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaw5-xen' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDopenqaw5-xen
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "673"
            __dashboardUid__: GDopenqaw5-xen
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: lcAhcifVk
          isPaused: false
    - orgId: 1
      name: openqaworker-arm-1 offline
      folder: Salt
      interval: 1m
      rules:
        - uid: VkA25mf4k
          title: openqaworker-arm-1 offline
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-1.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 2
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "183"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "2"
            message: Triggering reboot of openqaworker-arm-1 - see https://gitlab.suse.de/openqa/grafana-webhook-actions/-/jobs for details, status and history
          labels:
            __contacts__: '"Trigger reboot of openqaworker-arm-1"'
            rule_uid: VkA25mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: J6Th5iBVz
          title: 'openqaworker-arm-1: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker-arm-1' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker-arm-1
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "163"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: J6Th5iBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: E6oh5if4k
          title: 'openqaworker-arm-1: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker-arm-1') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "393"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: E6oh5if4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 5eohcmBVz
          title: 'openqaworker-arm-1: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker-arm-1' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-1
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "159"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 5eohcmBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: x6oh5ifVz
          title: 'openqaworker-arm-1: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker-arm-1') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "164"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: x6oh5ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: p6T2ciB4z
          title: 'openqaworker-arm-1: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "161"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: p6T2ciB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: UeT25mfVz
          title: 'openqaworker-arm-1: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "410"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: UeT25mfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: a6T2cmf4k
          title: 'openqaworker-arm-1: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "214"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker-arm-1.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker-arm-1`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: a6T2cmf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-1: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: YeT2cifVz
          title: 'openqaworker-arm-1: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "290"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: YeT2cifVz
          isPaused: true
    - orgId: 1
      name: 'openqaworker-arm-1: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: o6ThcmB4k
          title: 'openqaworker-arm-1: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker-arm-1' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-1
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "162"
            __dashboardUid__: WDopenqaworker-arm-1
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: o6ThcmB4k
          isPaused: false
    - orgId: 1
      name: openqaworker-arm-2 offline
      folder: Salt
      interval: 1m
      rules:
        - uid: VzA2cif4zz
          title: openqaworker-arm-2 offline
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-2.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 3
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "184"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "3"
            message: Triggering reboot of openqaworker-arm-2 - see https://gitlab.suse.de/openqa/grafana-webhook-actions/-/jobs for details, status and history
          labels:
            __contacts__: '"Trigger reboot of openqaworker-arm-2"'
            rule_uid: VzA2cif4zz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 3eo2cif4k
          title: 'openqaworker-arm-2: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker-arm-2' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker-arm-2
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "169"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3eo2cif4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: VRA2cmB4z
          title: 'openqaworker-arm-2: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker-arm-2') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "399"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: VRA2cmB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _6o25iB4z
          title: 'openqaworker-arm-2: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker-arm-2' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-2
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "165"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _6o25iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: mR02cmB4z
          title: 'openqaworker-arm-2: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker-arm-2') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "170"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: mR02cmB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: X6o25ifVz
          title: 'openqaworker-arm-2: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "167"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: X6o25ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: HRAhcmBVk
          title: 'openqaworker-arm-2: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "407"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: HRAhcmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: WgA2cif4k
          title: 'openqaworker-arm-2: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "222"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker-arm-2.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker-arm-2`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: WgA2cif4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-2: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: ngAh5mB4z
          title: 'openqaworker-arm-2: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "279"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ngAh5mB4z
          isPaused: true
    - orgId: 1
      name: 'openqaworker-arm-2: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: j6T2cmB4z
          title: 'openqaworker-arm-2: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker-arm-2' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-2
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "168"
            __dashboardUid__: WDopenqaworker-arm-2
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: j6T2cmB4z
          isPaused: false
    - orgId: 1
      name: openqaworker-arm-3 offline
      folder: Salt
      interval: 1m
      rules:
        - uid: Sk02ciBVk
          title: openqaworker-arm-3 offline
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: openqaworker-arm-3.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 4
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "185"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "4"
            message: Triggering reboot of openqaworker-arm-3 - see https://gitlab.suse.de/openqa/grafana-webhook-actions/-/jobs for details, status and history
          labels:
            __contacts__: '"Trigger reboot of openqaworker-arm-3"'
            rule_uid: Sk02ciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 0kAh5mfVk
          title: 'openqaworker-arm-3: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker-arm-3' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker-arm-3
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "190"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 0kAh5mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Pz0hcmBVz
          title: 'openqaworker-arm-3: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker-arm-3') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "395"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Pz0hcmBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 5kAh5ifVk
          title: 'openqaworker-arm-3: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker-arm-3' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-3
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "186"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 5kAh5ifVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: bzAhcmf4k
          title: 'openqaworker-arm-3: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker-arm-3') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "191"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: bzAhcmf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 2zA25iBVz
          title: 'openqaworker-arm-3: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "188"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2zA25iBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: sz0hciBVk
          title: 'openqaworker-arm-3: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "415"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: sz0hciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: azAhcmfVk
          title: 'openqaworker-arm-3: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "219"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker-arm-3.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker-arm-3`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: azAhcmfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-3: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: BzAh5if4k
          title: 'openqaworker-arm-3: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "291"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: BzAh5if4k
          isPaused: true
    - orgId: 1
      name: 'openqaworker-arm-3: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: oz0hcmBVk
          title: 'openqaworker-arm-3: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker-arm-3' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-3
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "189"
            __dashboardUid__: WDopenqaworker-arm-3
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: oz0hcmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: wG0hcmfVk
          title: 'openqaworker-arm-4: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1500
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker-arm-4' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker-arm-4
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "354"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: wG0hcmfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: BG02cmBVk
          title: 'openqaworker-arm-4: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker-arm-4' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-4
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "350"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: BG02cmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: XG0hciBVk
          title: 'openqaworker-arm-4: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker-arm-4') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-4
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "355"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: XG0hciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: LMAhciBVk
          title: 'openqaworker-arm-4: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-4
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "351"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: LMAhciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: rM02ciB4k
          title: 'openqaworker-arm-4: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
          dashboardUid: WDopenqaworker-arm-4
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "356"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker-arm-4.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker-arm-4`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: rM02ciB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-4: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: PG0h5mB4k
          title: 'openqaworker-arm-4: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-4
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-4
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "352"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: PG0h5mB4k
          isPaused: true
    - orgId: 1
      name: 'openqaworker-arm-4: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 8M0hcif4k
          title: 'openqaworker-arm-4: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker-arm-4' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-4
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "353"
            __dashboardUid__: WDopenqaworker-arm-4
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8M0hcif4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: hM02cmfVz
          title: 'openqaworker-arm-5: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 1500
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker-arm-5' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker-arm-5
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "347"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: hM02cmfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: SG02ciB4k
          title: 'openqaworker-arm-5: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker-arm-5' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-5
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "343"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: SG02ciB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 1MA2cmf4k
          title: 'openqaworker-arm-5: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker-arm-5') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-5
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "348"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1MA2cmf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: DG025ifVz
          title: 'openqaworker-arm-5: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-5
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "344"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: DG025ifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: -G02cifVz
          title: 'openqaworker-arm-5: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
          dashboardUid: WDopenqaworker-arm-5
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "349"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker-arm-5.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker-arm-5`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: -G02cifVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker-arm-5: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: dGAhcmf4k
          title: 'openqaworker-arm-5: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker-arm-5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker-arm-5
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "345"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: dGAhcmf4k
          isPaused: true
    - orgId: 1
      name: 'openqaworker-arm-5: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: cGAhciBVk
          title: 'openqaworker-arm-5: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker-arm-5' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker-arm-5
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "346"
            __dashboardUid__: WDopenqaworker-arm-5
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: cGAhciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: I70h5mfVk
          title: 'openqaworker14: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker14' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker14
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "378"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: I70h5mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: tn025iB4k
          title: 'openqaworker14: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker14') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker14
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "422"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: tn025iB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: kn025iB4z
          title: 'openqaworker14: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker14' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker14
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "374"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: kn025iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: NnA2cif4z
          title: 'openqaworker14: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker14') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker14
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "379"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: NnA2cif4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: W7AhcmBVz
          title: 'openqaworker14: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker14
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "375"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: W7AhcmBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: K7AhcmBVk
          title: 'openqaworker14: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker14
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "421"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: K7AhcmBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: OnA2ciBVk
          title: 'openqaworker14: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
          dashboardUid: WDopenqaworker14
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "380"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker14.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker14`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: OnA2ciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: GnA2cmfVk
          title: 'openqaworker14: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker14
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker14
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "376"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: GnA2cmfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker14: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: V70h5mf4k
          title: 'openqaworker14: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker14' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker14
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "377"
            __dashboardUid__: WDopenqaworker14
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: V70h5mf4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: xKA25mfVk
          title: 'openqaworker16: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker16' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker16
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "648"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: xKA25mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: aFA25iB4z
          title: 'openqaworker16: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker16') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker16
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "649"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: aFA25iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: KK0h5mf4z
          title: 'openqaworker16: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker16' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker16
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "643"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: KK0h5mf4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: fKAh5iBVk
          title: 'openqaworker16: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker16') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker16
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "650"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: fKAh5iBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: cK02ciBVk
          title: 'openqaworker16: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker16
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "644"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: cK02ciBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: TFA25mBVk
          title: 'openqaworker16: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker16
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "646"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: TFA25mBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: sK0hcmB4k
          title: 'openqaworker16: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
          dashboardUid: WDopenqaworker16
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "651"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker16.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker16`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: sK0hcmB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 2F0hcmB4z
          title: 'openqaworker16: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker16
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker16
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "645"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2F0hcmB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker16: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 0F0h5iB4z
          title: 'openqaworker16: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker16' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker16
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "647"
            __dashboardUid__: WDopenqaworker16
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 0F0h5iB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 1c025iBVk
          title: 'openqaworker17: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker17' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker17
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "666"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1c025iBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: b5A25mfVz
          title: 'openqaworker17: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker17') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker17
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "667"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: b5A25mfVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Nc0h5mfVk
          title: 'openqaworker17: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker17' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker17
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "661"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Nc0h5mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: a50h5ifVk
          title: 'openqaworker17: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker17') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker17
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "668"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: a50h5ifVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: O5A2ciBVz
          title: 'openqaworker17: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker17
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "662"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: O5A2ciBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: p5Ah5ifVk
          title: 'openqaworker17: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker17
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "664"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: p5Ah5ifVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Lc025iBVk
          title: 'openqaworker17: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
          dashboardUid: WDopenqaworker17
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "669"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker17.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker17`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Lc025iBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: Fc0hcif4z
          title: 'openqaworker17: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker17
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker17
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "663"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Fc0hcif4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker17: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: hc0hciBVz
          title: 'openqaworker17: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker17' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker17
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "665"
            __dashboardUid__: WDopenqaworker17
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: hc0hciBVz
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: m502cmfVk
          title: 'openqaworker18: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'openqaworker18' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDopenqaworker18
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "657"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: m502cmfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: M50h5mB4z
          title: 'openqaworker18: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'openqaworker18') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker18
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "658"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: M50h5mB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: wK0h5mBVk
          title: 'openqaworker18: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'openqaworker18' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker18
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "652"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: wK0h5mBVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 75Ah5mfVk
          title: 'openqaworker18: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'openqaworker18') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker18
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "659"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 75Ah5mfVk
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 9K02cif4z
          title: 'openqaworker18: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker18
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "653"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 9K02cif4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 6KA25mB4z
          title: 'openqaworker18: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker18
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "655"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6KA25mB4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 450h5mB4k
          title: 'openqaworker18: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
          dashboardUid: WDopenqaworker18
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "660"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on openqaworker18.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N openqaworker18`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 450h5mB4k
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: CF0h5if4z
          title: 'openqaworker18: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqaworker18
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDopenqaworker18
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "654"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: CF0h5if4z
          isPaused: false
    - orgId: 1
      name: 'openqaworker18: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: zcAhcmfVk
          title: 'openqaworker18: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'openqaworker18' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDopenqaworker18
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "656"
            __dashboardUid__: WDopenqaworker18
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zcAhcmfVk
          isPaused: false
    - orgId: 1
      name: postfix.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: jXo25ifVkz
          title: postfix.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/postfix.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 14
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "67"
            __dashboardUid__: webuiSyS
            __panelId__: "14"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jXo25ifVkz
          isPaused: false
    - orgId: 1
      name: postgresql.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: jXohcif4k
          title: postgresql.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/postgresql.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 13
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "66"
            __dashboardUid__: webuiSyS
            __panelId__: "13"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jXohcif4k
          isPaused: false
    - orgId: 1
      name: powerqaworker-qam-1.qa.suse.de offline
      folder: Salt
      interval: 1m
      rules:
        - uid: Fk0h5iBVk
          title: powerqaworker-qam-1.qa.suse.de offline
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                datasource:
                    type: influxdb
                    uid: "000000001"
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - packets_received
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: powerqaworker-qam-1.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: 1bNU0StZz
          panelId: 9
          noDataState: NoData
          execErrState: Error
          for: 6m
          annotations:
            __alertId__: "599"
            __dashboardUid__: 1bNU0StZz
            __panelId__: "9"
            message: Triggering reset of powerqaworker-qam-1.qa.suse.de - see https://gitlab.suse.de/openqa/grafana-webhook-actions/-/jobs for details, status and history
          labels:
            __contacts__: '"Reset powerqaworker-qam-1"'
            rule_uid: Fk0h5iBVk
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: km02cmB4z
          title: 'powerqaworker-qam-1: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'powerqaworker-qam-1' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "256"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: km02cmB4z
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 4i025iB4k
          title: 'powerqaworker-qam-1: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'powerqaworker-qam-1') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "402"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4i025iB4k
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Cz0h5mBVz
          title: 'powerqaworker-qam-1: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'powerqaworker-qam-1' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "253"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Cz0h5mBVz
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Wi02cifVk
          title: 'powerqaworker-qam-1: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'powerqaworker-qam-1') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "257"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Wi02cifVk
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ez0h5mfVz
          title: 'powerqaworker-qam-1: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "254"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ez0h5mfVz
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Di025mfVz
          title: 'powerqaworker-qam-1: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "413"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Di025mfVz
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: MiAh5mBVz
          title: 'powerqaworker-qam-1: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "258"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on powerqaworker-qam-1.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N powerqaworker-qam-1`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: MiAh5mBVz
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 7i0hcmf4k
          title: 'powerqaworker-qam-1: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: powerqaworker-qam-1
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "289"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 7i0hcmf4k
          isPaused: false
    - orgId: 1
      name: 'powerqaworker-qam-1: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Ri025mBVk
          title: 'powerqaworker-qam-1: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'powerqaworker-qam-1' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDpowerqaworker-qam-1
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "255"
            __dashboardUid__: WDpowerqaworker-qam-1
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Ri025mBVk
          isPaused: false
    - orgId: 1
      name: 'qamasternue: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: q7A2ciB4k
          title: 'qamasternue: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'qamasternue' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: qamasternue
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDqamasternue
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "525"
            __dashboardUid__: GDqamasternue
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: q7A2ciB4k
          isPaused: false
    - orgId: 1
      name: 'qamasternue: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: wnAhcif4z
          title: 'qamasternue: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'qamasternue' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDqamasternue
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "521"
            __dashboardUid__: GDqamasternue
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: wnAhcif4z
          isPaused: false
    - orgId: 1
      name: 'qamasternue: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 6nA25mfVk
          title: 'qamasternue: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'qamasternue') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: qamasternue
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDqamasternue
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "526"
            __dashboardUid__: GDqamasternue
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6nA25mfVk
          isPaused: false
    - orgId: 1
      name: 'qamasternue: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _n0h5ifVk
          title: 'qamasternue: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: qamasternue.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDqamasternue
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "522"
            __dashboardUid__: GDqamasternue
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _n0h5ifVk
          isPaused: false
    - orgId: 1
      name: 'qamasternue: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: u70h5ifVz
          title: 'qamasternue: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: qamasternue.qa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDqamasternue
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "523"
            __dashboardUid__: GDqamasternue
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: u70h5ifVz
          isPaused: false
    - orgId: 1
      name: 'qamasternue: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: C7AhcmBVz
          title: 'qamasternue: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'qamasternue' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDqamasternue
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "524"
            __dashboardUid__: GDqamasternue
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: C7AhcmBVz
          isPaused: false
    - orgId: 1
      name: rsyncd.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: 9uoh5if4k
          title: rsyncd.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/rsyncd.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 12
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "65"
            __dashboardUid__: webuiSyS
            __panelId__: "12"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 9uoh5if4k
          isPaused: false
    - orgId: 1
      name: salt-master.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: _Xo2cif4k
          title: salt-master.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/salt-master.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 10
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "63"
            __dashboardUid__: webuiSyS
            __panelId__: "10"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _Xo2cif4k
          isPaused: false
    - orgId: 1
      name: salt-minion.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: XuohcmB4z
          title: salt-minion.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/salt-minion.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 11
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "64"
            __dashboardUid__: webuiSyS
            __panelId__: "11"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: XuohcmB4z
          isPaused: false
    - orgId: 1
      name: 'schort-server: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: P4Ahcmf4z
          title: 'schort-server: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'schort-server' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: schort-server
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDschort-server
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "543"
            __dashboardUid__: GDschort-server
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: P4Ahcmf4z
          isPaused: false
    - orgId: 1
      name: 'schort-server: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 040hciBVz
          title: 'schort-server: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'schort-server' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDschort-server
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "539"
            __dashboardUid__: GDschort-server
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 040hciBVz
          isPaused: false
    - orgId: 1
      name: 'schort-server: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 8VAh5mBVk
          title: 'schort-server: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'schort-server') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: schort-server
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDschort-server
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "544"
            __dashboardUid__: GDschort-server
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8VAh5mBVk
          isPaused: false
    - orgId: 1
      name: 'schort-server: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: xVAhcmf4z
          title: 'schort-server: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: schort-server
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDschort-server
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "540"
            __dashboardUid__: GDschort-server
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: xVAhcmf4z
          isPaused: false
    - orgId: 1
      name: 'schort-server: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: f40h5iBVz
          title: 'schort-server: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: schort-server
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDschort-server
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "541"
            __dashboardUid__: GDschort-server
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: f40h5iBVz
          isPaused: false
    - orgId: 1
      name: 'schort-server: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: L4A25mfVk
          title: 'schort-server: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'schort-server' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDschort-server
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "542"
            __dashboardUid__: GDschort-server
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: L4A25mfVk
          isPaused: false
    - orgId: 1
      name: smb.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: yuohcmfVz
          title: smb.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/smb.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 7
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "60"
            __dashboardUid__: webuiSyS
            __panelId__: "7"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: yuohcmfVz
          isPaused: false
    - orgId: 1
      name: sshd.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: JXThcif4z
          title: sshd.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/sshd.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 1
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "54"
            __dashboardUid__: webuiSyS
            __panelId__: "1"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: JXThcif4z
          isPaused: false
    - orgId: 1
      name: 'storage: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 8WAh5ifVz
          title: 'storage: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'storage' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: storage
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDstorage
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "328"
            __dashboardUid__: GDstorage
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8WAh5ifVz
          isPaused: false
    - orgId: 1
      name: 'storage: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: AZAhcmf4z
          title: 'storage: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'storage' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDstorage
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "313"
            __dashboardUid__: GDstorage
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: AZAhcmf4z
          isPaused: false
    - orgId: 1
      name: 'storage: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: LZA25ifVz
          title: 'storage: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'storage') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: storage
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDstorage
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "318"
            __dashboardUid__: GDstorage
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: LZA25ifVz
          isPaused: false
    - orgId: 1
      name: 'storage: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 1Z0hciBVz
          title: 'storage: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: storage.oqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDstorage
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "314"
            __dashboardUid__: GDstorage
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1Z0hciBVz
          isPaused: false
    - orgId: 1
      name: 'storage: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: BWAhcmf4k
          title: 'storage: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: storage.oqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDstorage
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "315"
            __dashboardUid__: GDstorage
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: BWAhcmf4k
          isPaused: false
    - orgId: 1
      name: 'storage: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: EZ025if4k
          title: 'storage: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'storage' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDstorage
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "327"
            __dashboardUid__: GDstorage
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: EZ025if4k
          isPaused: true
    - orgId: 1
      name: telegraf.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: QXTh5iBVk
          title: telegraf.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/telegraf.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 9
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "62"
            __dashboardUid__: webuiSyS
            __panelId__: "9"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QXTh5iBVk
          isPaused: false
    - orgId: 1
      name: 'tumblesle: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: M4025ifVk
          title: 'tumblesle: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'tumblesle' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: tumblesle
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: GDtumblesle
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "531"
            __dashboardUid__: GDtumblesle
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: M4025ifVk
          isPaused: false
    - orgId: 1
      name: 'tumblesle: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: gV025if4k
          title: 'tumblesle: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0.1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - Available percentage
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: Available percentage
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: available (percentage)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) / mean(total) as available_p  FROM "mem" WHERE host = 'tumblesle' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: Available percentage
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDtumblesle
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "527"
            __dashboardUid__: GDtumblesle
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: gV025if4k
          isPaused: false
    - orgId: 1
      name: 'tumblesle: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: n4025mfVz
          title: 'tumblesle: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'tumblesle') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: tumblesle
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDtumblesle
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "532"
            __dashboardUid__: GDtumblesle
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: n4025mfVz
          isPaused: false
    - orgId: 1
      name: 'tumblesle: Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: kVA25if4z
          title: 'tumblesle: Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: tumblesle
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDtumblesle
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "528"
            __dashboardUid__: GDtumblesle
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: kVA25if4z
          isPaused: false
    - orgId: 1
      name: 'tumblesle: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: m4025iB4k
          title: 'tumblesle: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: url
                      operator: =
                      value: tumblesle
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: GDtumblesle
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "529"
            __dashboardUid__: GDtumblesle
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: m4025iB4k
          isPaused: false
    - orgId: 1
      name: 'tumblesle: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Z4A25ifVk
          title: 'tumblesle: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'tumblesle' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: GDtumblesle
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "530"
            __dashboardUid__: GDtumblesle
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Z4A25ifVk
          isPaused: false
    - orgId: 1
      name: vsftpd.service alert
      folder: Salt
      interval: 1m
      rules:
        - uid: UXo2cifVz
          title: vsftpd.service alert
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Procs
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 10s
                measurement: procstat_lookup
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - pid_count
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
                    - condition: AND
                      key: cgroup
                      operator: =
                      value: systemd/system.slice/vsftpd.service
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                refId: B
                type: classic_conditions
          dashboardUid: webuiSyS
          panelId: 8
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "61"
            __dashboardUid__: webuiSyS
            __panelId__: "8"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: UXo2cifVz
          isPaused: false
    - orgId: 1
      name: 'web UI: Minion workers alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 8i02cmB4z
          title: 'web UI: Minion workers alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - online_workers
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: online_workers
              relativeTimeRange:
                from: 600
                to: 60
              datasourceUid: "000000001"
              model:
                alias: ""
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 2m
                orderByTime: ASC
                policy: default
                query: SELECT max(active) + max(inactive) FROM "openqa_minion_workers" WHERE ("host" = 'openqa') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: true
                refId: online_workers
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WebuiDb
          panelId: 17
          noDataState: NoData
          execErrState: Error
          for: 10m
          annotations:
            __alertId__: "298"
            __dashboardUid__: WebuiDb
            __panelId__: "17"
            message: |-
                No Minion workers on openqa.suse.de are online. There is one worker *expected* to be online, visible under https://openqa.suse.de/minion/workers.

                If this alert triggers, openQA is unable to perform background tasks. Check the status of `openqa-gru.service` on openqa.suse.de to investigate. It may help to restart that service. For logs, checkout `journalctl -fu openqa-gru.service` and `/var/log/openqa_gru`.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8i02cmB4z
          isPaused: false
    - orgId: 1
      name: 'web UI: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: liA25iB4k
          title: 'web UI: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 20
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: openqa
          dashboardUid: WebuiDb
          panelId: 19
          noDataState: Alerting
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "299"
            __dashboardUid__: WebuiDb
            __panelId__: "19"
            message: |-
                Too many Minion jobs have failed on openqa.suse.de

                Review the failed jobs on https://openqa.suse.de/minion/jobs?state=failed and create a ticket if there's not already one (see https://progress.opensuse.org/issues/96263 and related tickets) and the failed jobs aren't just a symptom of a bigger problem (e.g. database outage). After investigation remove the failed jobs (possibly keeping one instance of a failure kind around). For the general log of the Minion job queue, checkout `journalctl -fu openqa-gru.service` and `/var/log/openqa_gru` on openqa.suse.de.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: liA25iB4k
          isPaused: false
    - orgId: 1
      name: 'worker10: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: uI0h5mfVk
          title: 'worker10: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker10' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker10
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker10
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "568"
            __dashboardUid__: WDworker10
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: uI0h5mfVk
          isPaused: false
    - orgId: 1
      name: 'worker10: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 9S0h5iBVz
          title: 'worker10: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker10') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker10
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "569"
            __dashboardUid__: WDworker10
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 9S0h5iBVz
          isPaused: false
    - orgId: 1
      name: 'worker10: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: fI0hcmfVz
          title: 'worker10: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker10' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker10
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "563"
            __dashboardUid__: WDworker10
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: fI0hcmfVz
          isPaused: false
    - orgId: 1
      name: 'worker10: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: qS025if4k
          title: 'worker10: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker10') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker10
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "570"
            __dashboardUid__: WDworker10
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: qS025if4k
          isPaused: false
    - orgId: 1
      name: 'worker10: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: YIA2cmf4k
          title: 'worker10: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker10
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "564"
            __dashboardUid__: WDworker10
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: YIA2cmf4k
          isPaused: false
    - orgId: 1
      name: 'worker10: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: UI0h5ifVz
          title: 'worker10: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker10
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "566"
            __dashboardUid__: WDworker10
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: UI0h5ifVz
          isPaused: false
    - orgId: 1
      name: 'worker10: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 6I025mB4k
          title: 'worker10: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
          dashboardUid: WDworker10
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "571"
            __dashboardUid__: WDworker10
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker10.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker10`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6I025mB4k
          isPaused: false
    - orgId: 1
      name: 'worker10: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: yS025if4z
          title: 'worker10: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker10
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker10
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "565"
            __dashboardUid__: WDworker10
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: yS025if4z
          isPaused: false
    - orgId: 1
      name: 'worker10: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: lIA25mfVk
          title: 'worker10: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker10' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker10
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "567"
            __dashboardUid__: WDworker10
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: lIA25mfVk
          isPaused: false
    - orgId: 1
      name: 'worker11: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: avA2cmBVz
          title: 'worker11: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker11' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker11
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker11
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "605"
            __dashboardUid__: WDworker11
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: avA2cmBVz
          isPaused: false
    - orgId: 1
      name: 'worker11: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Bv0h5mf4k
          title: 'worker11: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker11') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker11
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "606"
            __dashboardUid__: WDworker11
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Bv0h5mf4k
          isPaused: false
    - orgId: 1
      name: 'worker11: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Ov0hcmfVz
          title: 'worker11: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker11' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker11
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "600"
            __dashboardUid__: WDworker11
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Ov0hcmfVz
          isPaused: false
    - orgId: 1
      name: 'worker11: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: yvA25iB4z
          title: 'worker11: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker11') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker11
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "607"
            __dashboardUid__: WDworker11
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: yvA25iB4z
          isPaused: false
    - orgId: 1
      name: 'worker11: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: cvAh5mB4z
          title: 'worker11: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker11
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "601"
            __dashboardUid__: WDworker11
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: cvAh5mB4z
          isPaused: false
    - orgId: 1
      name: 'worker11: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Av025ifVz
          title: 'worker11: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker11
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "603"
            __dashboardUid__: WDworker11
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Av025ifVz
          isPaused: false
    - orgId: 1
      name: 'worker11: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: wv02cmBVz
          title: 'worker11: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
          dashboardUid: WDworker11
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "608"
            __dashboardUid__: WDworker11
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker11.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker11`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: wv02cmBVz
          isPaused: false
    - orgId: 1
      name: 'worker11: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 2vAh5mf4z
          title: 'worker11: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker11
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker11
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "602"
            __dashboardUid__: WDworker11
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2vAh5mf4z
          isPaused: false
    - orgId: 1
      name: 'worker11: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 1D02cif4k
          title: 'worker11: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker11' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker11
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "604"
            __dashboardUid__: WDworker11
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 1D02cif4k
          isPaused: false
    - orgId: 1
      name: 'worker12: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 3OAh5mBVz
          title: 'worker12: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker12' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker12
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker12
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "633"
            __dashboardUid__: WDworker12
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3OAh5mBVz
          isPaused: false
    - orgId: 1
      name: 'worker12: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 6d0h5mf4z
          title: 'worker12: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker12') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker12
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "634"
            __dashboardUid__: WDworker12
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6d0h5mf4z
          isPaused: false
    - orgId: 1
      name: 'worker12: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: LdAh5iBVz
          title: 'worker12: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker12' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker12
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "628"
            __dashboardUid__: WDworker12
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: LdAh5iBVz
          isPaused: false
    - orgId: 1
      name: 'worker12: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: kK0h5if4k
          title: 'worker12: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker12') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker12
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "635"
            __dashboardUid__: WDworker12
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: kK0h5if4k
          isPaused: false
    - orgId: 1
      name: 'worker12: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ydAh5mBVk
          title: 'worker12: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker12
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "629"
            __dashboardUid__: WDworker12
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ydAh5mBVk
          isPaused: false
    - orgId: 1
      name: 'worker12: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: XO0hcif4k
          title: 'worker12: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker12
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "631"
            __dashboardUid__: WDworker12
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: XO0hcif4k
          isPaused: false
    - orgId: 1
      name: 'worker12: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: mF02ciBVk
          title: 'worker12: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
          dashboardUid: WDworker12
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "636"
            __dashboardUid__: WDworker12
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker12.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker12`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: mF02ciBVk
          isPaused: false
    - orgId: 1
      name: 'worker12: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 8dA2cmBVk
          title: 'worker12: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker12
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker12
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "630"
            __dashboardUid__: WDworker12
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 8dA2cmBVk
          isPaused: false
    - orgId: 1
      name: 'worker12: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: jd02cifVk
          title: 'worker12: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker12' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker12
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "632"
            __dashboardUid__: WDworker12
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jd02cifVk
          isPaused: false
    - orgId: 1
      name: 'worker13: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: RSA2cmf4k
          title: 'worker13: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker13' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker13
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker13
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "550"
            __dashboardUid__: WDworker13
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: RSA2cmf4k
          isPaused: false
    - orgId: 1
      name: 'worker13: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: zS0h5ifVz
          title: 'worker13: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker13') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker13
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "551"
            __dashboardUid__: WDworker13
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zS0h5ifVz
          isPaused: false
    - orgId: 1
      name: 'worker13: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: QV0h5mB4z
          title: 'worker13: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker13' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker13
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "545"
            __dashboardUid__: WDworker13
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QV0h5mB4z
          isPaused: false
    - orgId: 1
      name: 'worker13: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: ZSA2cmB4k
          title: 'worker13: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker13') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker13
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "552"
            __dashboardUid__: WDworker13
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ZSA2cmB4k
          isPaused: false
    - orgId: 1
      name: 'worker13: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: _4A25mf4z
          title: 'worker13: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker13
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "546"
            __dashboardUid__: WDworker13
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: _4A25mf4z
          isPaused: false
    - orgId: 1
      name: 'worker13: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: CV0h5mB4k
          title: 'worker13: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker13
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "548"
            __dashboardUid__: WDworker13
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: CV0h5mB4k
          isPaused: false
    - orgId: 1
      name: 'worker13: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: GSA2cif4k
          title: 'worker13: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
          dashboardUid: WDworker13
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "553"
            __dashboardUid__: WDworker13
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker13.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker13`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: GSA2cif4k
          isPaused: false
    - orgId: 1
      name: 'worker13: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 94025mBVz
          title: 'worker13: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker13
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker13
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "547"
            __dashboardUid__: WDworker13
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 94025mBVz
          isPaused: false
    - orgId: 1
      name: 'worker13: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 3VAh5ifVz
          title: 'worker13: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker13' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker13
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "549"
            __dashboardUid__: WDworker13
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3VAh5ifVz
          isPaused: false
    - orgId: 1
      name: 'worker2: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 2SAhciB4z
          title: 'worker2: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker2' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker2
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker2
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "559"
            __dashboardUid__: WDworker2
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 2SAhciB4z
          isPaused: false
    - orgId: 1
      name: 'worker2: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: AI0h5mBVz
          title: 'worker2: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker2') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker2
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "560"
            __dashboardUid__: WDworker2
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: AI0h5mBVz
          isPaused: false
    - orgId: 1
      name: 'worker2: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: nI0h5iBVk
          title: 'worker2: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker2' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker2
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "554"
            __dashboardUid__: WDworker2
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: nI0h5iBVk
          isPaused: false
    - orgId: 1
      name: 'worker2: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: JS0hcmBVz
          title: 'worker2: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker2') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker2
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "561"
            __dashboardUid__: WDworker2
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: JS0hcmBVz
          isPaused: false
    - orgId: 1
      name: 'worker2: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: SI025mB4k
          title: 'worker2: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker2
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "555"
            __dashboardUid__: WDworker2
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: SI025mB4k
          isPaused: false
    - orgId: 1
      name: 'worker2: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: vI0hcifVz
          title: 'worker2: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker2
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "557"
            __dashboardUid__: WDworker2
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: vI0hcifVz
          isPaused: false
    - orgId: 1
      name: 'worker2: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: xS0hcmf4k
          title: 'worker2: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
          dashboardUid: WDworker2
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "562"
            __dashboardUid__: WDworker2
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker2.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker2`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: xS0hcmf4k
          isPaused: false
    - orgId: 1
      name: 'worker2: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: NS025iB4k
          title: 'worker2: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker2
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker2
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "556"
            __dashboardUid__: WDworker2
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: NS025iB4k
          isPaused: false
    - orgId: 1
      name: 'worker2: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: pS02cmf4k
          title: 'worker2: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker2' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker2
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "558"
            __dashboardUid__: WDworker2
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: pS02cmf4k
          isPaused: false
    - orgId: 1
      name: 'worker3: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: WD0hciB4z
          title: 'worker3: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker3' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker3
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker3
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "595"
            __dashboardUid__: WDworker3
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: WD0hciB4z
          isPaused: false
    - orgId: 1
      name: 'worker3: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 7v025iBVk
          title: 'worker3: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker3') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker3
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "596"
            __dashboardUid__: WDworker3
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 7v025iBVk
          isPaused: false
    - orgId: 1
      name: 'worker3: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: uHAhcmB4z
          title: 'worker3: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker3' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker3
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "590"
            __dashboardUid__: WDworker3
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: uHAhcmB4z
          isPaused: false
    - orgId: 1
      name: 'worker3: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: IvAh5mf4z
          title: 'worker3: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker3') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker3
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "597"
            __dashboardUid__: WDworker3
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: IvAh5mf4z
          isPaused: false
    - orgId: 1
      name: 'worker3: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: CNA25mBVk
          title: 'worker3: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker3
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "591"
            __dashboardUid__: WDworker3
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: CNA25mBVk
          isPaused: false
    - orgId: 1
      name: 'worker3: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 6H02cmfVz
          title: 'worker3: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker3
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "593"
            __dashboardUid__: WDworker3
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 6H02cmfVz
          isPaused: false
    - orgId: 1
      name: 'worker3: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: vDAh5if4z
          title: 'worker3: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
          dashboardUid: WDworker3
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "598"
            __dashboardUid__: WDworker3
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker3.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker3`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: vDAh5if4z
          isPaused: false
    - orgId: 1
      name: 'worker3: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 3HAh5iB4k
          title: 'worker3: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker3
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker3
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "592"
            __dashboardUid__: WDworker3
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 3HAh5iB4k
          isPaused: false
    - orgId: 1
      name: 'worker3: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: zDAh5iBVk
          title: 'worker3: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker3' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker3
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "594"
            __dashboardUid__: WDworker3
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zDAh5iBVk
          isPaused: false
    - orgId: 1
      name: 'worker5: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: SN025mfVz
          title: 'worker5: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker5' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker5
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker5
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "577"
            __dashboardUid__: WDworker5
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: SN025mfVz
          isPaused: false
    - orgId: 1
      name: 'worker5: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: dN0h5ifVz
          title: 'worker5: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker5') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker5
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "578"
            __dashboardUid__: WDworker5
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: dN0h5ifVz
          isPaused: false
    - orgId: 1
      name: 'worker5: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: gH025mB4k
          title: 'worker5: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker5' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker5
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "572"
            __dashboardUid__: WDworker5
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: gH025mB4k
          isPaused: false
    - orgId: 1
      name: 'worker5: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 5HA25ifVk
          title: 'worker5: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker5') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker5
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "579"
            __dashboardUid__: WDworker5
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 5HA25ifVk
          isPaused: false
    - orgId: 1
      name: 'worker5: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: mH0h5iBVz
          title: 'worker5: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker5
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "573"
            __dashboardUid__: WDworker5
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: mH0h5iBVz
          isPaused: false
    - orgId: 1
      name: 'worker5: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: GNA2cmfVk
          title: 'worker5: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker5
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "575"
            __dashboardUid__: WDworker5
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: GNA2cmfVk
          isPaused: false
    - orgId: 1
      name: 'worker5: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: tH02cmBVz
          title: 'worker5: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
          dashboardUid: WDworker5
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "580"
            __dashboardUid__: WDworker5
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker5.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker5`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: tH02cmBVz
          isPaused: false
    - orgId: 1
      name: 'worker5: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: ZN0hcif4k
          title: 'worker5: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker5
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker5
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "574"
            __dashboardUid__: WDworker5
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: ZN0hcif4k
          isPaused: false
    - orgId: 1
      name: 'worker5: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 4H0h5mBVk
          title: 'worker5: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker5' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker5
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "576"
            __dashboardUid__: WDworker5
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4H0h5mBVk
          isPaused: false
    - orgId: 1
      name: 'worker6: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: EHAh5mf4k
          title: 'worker6: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker6' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker6
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker6
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "586"
            __dashboardUid__: WDworker6
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: EHAh5mf4k
          isPaused: false
    - orgId: 1
      name: 'worker6: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: yH0hcmf4k
          title: 'worker6: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker6') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker6
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "587"
            __dashboardUid__: WDworker6
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: yH0hcmf4k
          isPaused: false
    - orgId: 1
      name: 'worker6: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: oN02ciB4k
          title: 'worker6: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker6' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker6
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "581"
            __dashboardUid__: WDworker6
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: oN02ciB4k
          isPaused: false
    - orgId: 1
      name: 'worker6: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: QH0h5if4z
          title: 'worker6: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker6') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker6
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "588"
            __dashboardUid__: WDworker6
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: QH0h5if4z
          isPaused: false
    - orgId: 1
      name: 'worker6: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: AN02cmf4k
          title: 'worker6: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker6
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "582"
            __dashboardUid__: WDworker6
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: AN02cmf4k
          isPaused: false
    - orgId: 1
      name: 'worker6: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: xNA2cifVz
          title: 'worker6: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker6
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "584"
            __dashboardUid__: WDworker6
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: xNA2cifVz
          isPaused: false
    - orgId: 1
      name: 'worker6: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: lN025iB4z
          title: 'worker6: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
          dashboardUid: WDworker6
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "589"
            __dashboardUid__: WDworker6
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker6.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker6`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: lN025iB4z
          isPaused: false
    - orgId: 1
      name: 'worker6: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: JH025mf4z
          title: 'worker6: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker6
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker6
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "583"
            __dashboardUid__: WDworker6
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: JH025mf4z
          isPaused: false
    - orgId: 1
      name: 'worker6: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: LHAhcmB4k
          title: 'worker6: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker6' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker6
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "585"
            __dashboardUid__: WDworker6
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: LHAhcmB4k
          isPaused: false
    - orgId: 1
      name: 'worker8: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 0O02cif4z
          title: 'worker8: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker8' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker8
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker8
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "623"
            __dashboardUid__: WDworker8
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 0O02cif4z
          isPaused: false
    - orgId: 1
      name: 'worker8: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: JO025iBVk
          title: 'worker8: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker8') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker8
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "624"
            __dashboardUid__: WDworker8
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: JO025iBVk
          isPaused: false
    - orgId: 1
      name: 'worker8: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Dd02cmfVz
          title: 'worker8: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker8' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker8
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "618"
            __dashboardUid__: WDworker8
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Dd02cmfVz
          isPaused: false
    - orgId: 1
      name: 'worker8: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: -dAh5mfVz
          title: 'worker8: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker8') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker8
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "625"
            __dashboardUid__: WDworker8
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: -dAh5mfVz
          isPaused: false
    - orgId: 1
      name: 'worker8: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: KdA2ciBVk
          title: 'worker8: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker8
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "619"
            __dashboardUid__: WDworker8
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: KdA2ciBVk
          isPaused: false
    - orgId: 1
      name: 'worker8: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: hO025if4z
          title: 'worker8: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker8
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "621"
            __dashboardUid__: WDworker8
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: hO025if4z
          isPaused: false
    - orgId: 1
      name: 'worker8: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: BOAhcmf4z
          title: 'worker8: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
          dashboardUid: WDworker8
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "626"
            __dashboardUid__: WDworker8
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker8.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker8`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: BOAhcmf4z
          isPaused: false
    - orgId: 1
      name: 'worker8: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: 5O02cifVz
          title: 'worker8: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker8
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker8
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "620"
            __dashboardUid__: WDworker8
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 5O02cifVz
          isPaused: false
    - orgId: 1
      name: 'worker8: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: oO025iBVz
          title: 'worker8: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker8' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker8
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "622"
            __dashboardUid__: WDworker8
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: oO025iBVz
          isPaused: false
    - orgId: 1
      name: 'worker9: Disk I/O time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: zd02cifVz
          title: 'worker9: Disk I/O time alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 20000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_name
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - name
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: diskio
                orderByTime: ASC
                policy: default
                query: SELECT non_negative_derivative(mean("io_time"), 1s) FROM "diskio" WHERE ("host" = 'worker9' AND ("name" <> 'nvme0n1' OR "name" = 'nvme1n1' OR "name" = 'sda' OR "name" = 'sdb')) AND $timeFilter GROUP BY time($__interval), "name" fill(null)
                rawQuery: true
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - read_time
                        type: field
                      - params: []
                        type: mean
                      - params:
                            - 1s
                        type: non_negative_derivative
                tags:
                    - key: host
                      operator: =
                      value: worker9
                    - condition: AND
                      key: name
                      operator: <>
                      value: nvme0n1
                    - condition: OR
                      key: name
                      operator: =
                      value: nvme1n1
                    - condition: OR
                      key: name
                      operator: =
                      value: sda
                    - condition: OR
                      key: name
                      operator: =
                      value: sdb
          dashboardUid: WDworker9
          panelId: 56720
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "614"
            __dashboardUid__: WDworker9
            __panelId__: "56720"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: zd02cifVz
          isPaused: false
    - orgId: 1
      name: 'worker9: Download rate alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: Wd0h5mfVk
          title: 'worker9: Download rate alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 3600
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_download_rate
                orderByTime: ASC
                policy: default
                query: SELECT mean("bytes") FROM "openqa_download_rate" WHERE ("host" = 'worker9') AND $timeFilter GROUP BY time($__interval) fill(previous)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - bytes
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 5.24288e+06
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: max
                refId: B
                type: classic_conditions
          dashboardUid: WDworker9
          panelId: 65109
          noDataState: NoData
          execErrState: Error
          for: 4h
          annotations:
            __alertId__: "615"
            __dashboardUid__: WDworker9
            __panelId__: "65109"
            message: |-
                Cache service download rate is lower than expected.

                See https://progress.opensuse.org/issues/106904 for details.
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: Wd0h5mfVk
          isPaused: false
    - orgId: 1
      name: 'worker9: Memory usage alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: lv0h5mBVz
          title: 'worker9: Memory usage alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - -3e+09
                        type: lt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 3e+09
                        type: lt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $col
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: mem_inactive
                orderByTime: ASC
                policy: default
                query: SELECT mean(available) as available  FROM "mem" WHERE host = 'worker9' AND $timeFilter GROUP BY time($interval), host ORDER BY asc
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker9
          panelId: 12054
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "609"
            __dashboardUid__: WDworker9
            __panelId__: "12054"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: lv0h5mBVz
          isPaused: false
    - orgId: 1
      name: 'worker9: NTP offset alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: 4d02cmBVz
          title: 'worker9: NTP offset alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Stratum $tag_stratum
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - stratum
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: chrony
                orderByTime: ASC
                policy: default
                query: SELECT mean(abs("rms_offset")) FROM "chrony" WHERE ("host" = 'worker9') AND $timeFilter GROUP BY time($__interval), "stratum" fill(null)
                rawQuery: false
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - rms_offset
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 1000
                            - -1000
                        type: outside_range
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker9
          panelId: 65102
          noDataState: NoData
          execErrState: Error
          for: 20m
          annotations:
            __alertId__: "616"
            __dashboardUid__: WDworker9
            __panelId__: "65102"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: 4d02cmBVz
          isPaused: false
    - orgId: 1
      name: 'worker9: OpenQA Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: uv0h5iB4z
          title: 'worker9: OpenQA Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
                    - condition: AND
                      key: url
                      operator: =
                      value: openqa.suse.de
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker9
          panelId: 65098
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "610"
            __dashboardUid__: WDworker9
            __panelId__: "65098"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: uv0h5iB4z
          isPaused: false
    - orgId: 1
      name: 'worker9: QA network infrastructure Ping time alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: qv02cmB4z
          title: 'worker9: QA network infrastructure Ping time alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_url
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - url
                      type: tag
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker9
          panelId: 65099
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "612"
            __dashboardUid__: WDworker9
            __panelId__: "65099"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: qv02cmB4z
          isPaused: false
    - orgId: 1
      name: 'worker9: Too many Minion job failures alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: NdAh5mfVk
          title: 'worker9: Too many Minion job failures alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Active
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - active
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 2000
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: last
                    - evaluator:
                        params:
                            - 100
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - C
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
            - refId: C
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: Failed
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - previous
                      type: fill
                measurement: openqa_minion_jobs
                orderByTime: ASC
                policy: default
                refId: C
                resultFormat: time_series
                select:
                    - - params:
                            - failed
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
          dashboardUid: WDworker9
          panelId: 65104
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "617"
            __dashboardUid__: WDworker9
            __panelId__: "65104"
            message: |-
                Too many Minion jobs have failed on worker9.

                Review failed jobs on http://localhost:9530/minion/jobs?state=failed after tunneling the worker's Minion dashboard via `ssh -L 9530:localhost:9530 -N worker9`. Create a ticket if there's not already one. For the general log of the Minion job queue, checkout `journalctl -u openqa-worker-cacheservice.service -u openqa-worker-cacheservice-minion.service`. To remove all failed jobs on the machine:

                ```
                /usr/share/openqa/script/openqa-workercache eval 'my $jobs = app->minion->jobs({states => ["failed"]}); while (my $job = $jobs->next) { $job->remove }'
                ```
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: NdAh5mfVk
          isPaused: false
    - orgId: 1
      name: 'worker9: host up alert'
      folder: Salt
      interval: 5m
      rules:
        - uid: jDAh5mf4k
          title: 'worker9: host up alert'
          condition: B
          data:
            - refId: A
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                groupBy:
                    - params:
                        - $__interval
                      type: time
                    - params:
                        - "null"
                      type: fill
                interval: 1m
                measurement: ping
                orderByTime: ASC
                policy: default
                refId: A
                resultFormat: time_series
                select:
                    - - params:
                            - average_response_ms
                        type: field
                      - params: []
                        type: mean
                tags:
                    - key: host
                      operator: =
                      value: worker9
            - refId: B
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params: []
                        type: no_value
                      operator:
                        type: and
                      query:
                        params:
                            - A
                      reducer:
                        type: avg
                refId: B
                type: classic_conditions
          dashboardUid: WDworker9
          panelId: 65105
          noDataState: NoData
          execErrState: Error
          for: 1h30m
          annotations:
            __alertId__: "611"
            __dashboardUid__: WDworker9
            __panelId__: "65105"
            message: |-
                No data received for pings from worker to central host, likely host is down (or split network).

                See https://progress.opensuse.org/issues/71098 for details
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: jDAh5mf4k
          isPaused: false
    - orgId: 1
      name: 'worker9: partitions usage (%) alert'
      folder: Salt
      interval: 1m
      rules:
        - uid: gd025iBVz
          title: 'worker9: partitions usage (%) alert'
          condition: A
          data:
            - refId: A
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 200
                        type: gt
                      operator:
                        type: and
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                    - evaluator:
                        params:
                            - 85
                        type: gt
                      operator:
                        type: or
                      query:
                        params:
                            - B
                      reducer:
                        type: avg
                refId: A
                type: classic_conditions
            - refId: B
              relativeTimeRange:
                from: 300
                to: 0
              datasourceUid: "000000001"
              model:
                alias: $tag_device ($tag_fstype)
                dsType: influxdb
                function: mean
                groupBy:
                    - interval: auto
                      params:
                        - auto
                      type: time
                    - key: host
                      params:
                        - tag
                      type: tag
                    - key: path
                      params:
                        - tag
                      type: tag
                interval: 1m
                measurement: disk_total
                orderByTime: ASC
                policy: default
                query: SELECT mean("used_percent") AS "used_percent" FROM "disk" WHERE ("host" = 'worker9' AND fstype != 'nfs') AND $timeFilter GROUP BY time($interval), "device", "fstype" fill(null)
                rawQuery: true
                refId: B
                resultFormat: time_series
                select:
                    - - params:
                            - value
                        type: field
                      - params: []
                        type: mean
                tags: []
          dashboardUid: WDworker9
          panelId: 65090
          noDataState: NoData
          execErrState: Error
          for: 5m
          annotations:
            __alertId__: "613"
            __dashboardUid__: WDworker9
            __panelId__: "65090"
            message: ""
          labels:
            __contacts__: '"osd-admins"'
            rule_uid: gd025iBVz
          isPaused: false
